targetted_decisions = {

	#GLOBAL
	send_son_to_university = {
		filter = dynasty
		ai_target_filter = dynasty
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			NOR = {
				trait = witch_hunter
				religion = grail
				religion = false_grail
				is_tribal = yes
				is_nomadic = yes
			}
			trait = creature_human
			OR = {
				religion_group = old_world_group
				religion_group = ormazd_gods_group
				religion = northern_gods
			}
			OR = {
				location = {
					region = world_old_world
				}
				location = {
					region = world_greater_araby
				}
			}
		}
		potential = {
			age = 16
			is_landed = no
			in_command = no
			OR = {
				father = {
					character = FROM
				}
				mother = {
					character = FROM
				}
			}
			NOR = {
				has_character_flag = wants_educ_university
				trait = academic
				trait = arabyan_scholar
				# has_character_flag = wants_eng_university
				# trait = engineer
			}
			OR = {
				is_female = no
				FROM = {
					NOR = {
						religion = ormazd
						religion = kitabid
					}
				}
			}
		}
		allow = {
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			host = {
				character = FROM
			}
			OR = {
				father = {
					character = FROM
				}
				mother = {
					character = FROM
				}
			}
		}
		effect = {
			log = "work decision send_son_to_university for [Root.GetBestName]"
			hidden_tooltip = {
				character_event = {
					id = DR_universities.31
				}
				if = {
					limit = {
						FROM = {
							is_female = yes
						}
					}
					set_character_flag = mother_return_university
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
			# modifier = {
			# factor = 0.005 # Slow it down
			# }
		}
	}
	vassalize_new_elector = {
		from_potential = {
			ai = no  # "ai_target_filter = all" is expensive, so ai instead uses MTTH event ElectiveLeagues.40
			league_potential_trigger = yes
		}
		potential = {
			NOT = {
				character = FROM
			}
			league_potential_trigger = yes
		}
		allow = {
			FROM = {
				primary_title = {
					has_law = succ_feudal_elective
					is_titular = yes
				}
				# Sorry for the indent, players, but it gets the scopes correct for sharing scripted triggers
				ROOT = {
					custom_tooltip = {
						text = LOWER_RANK_THAN_US
						lower_real_tier_than = PREV
					}
					THIS_can_be_elector_of_PREV_trigger = yes
					THIS_can_join_PREV_league_trigger = yes
					THIS_and_FROM_are_adjacent_trigger = yes
					NOT = {
						has_opinion_modifier = {
							who = FROM  modifier = opinion_granted_independence
						}
					}
				}
			}
		}
		effect = {
			log = "work decision vassalize_new_elector for [Root.GetBestName]"
			add_THIS_to_FROM_existing_league_effect = yes
		}
	}

	#Asur
	elven_courting_decision = { # Handles elven marriages
		ai_target_filter = realm
		only_playable = yes
		from_potential = {
			NOT = {
				has_character_modifier = courting_timer
			}
			OR = {
				trait = creature_elf
				AND = {
					ai = no
					has_global_flag = optionB
					OR = {
						religion_group = cytharai_group
						religion_group = cadai_group
					}
				}
			}
			age = 25
			is_betrothed = no
			is_married = no
			cannot_marry_trigger = no
		}
		potential = {
			nor = {
				has_character_modifier = courting_timer
				trait = pet_consort
			}
			trait = creature_elf
			age = 25
			is_consort = no
			OR = {
				AND = {
					FROM = {
						is_female = no
					}
					is_female = yes
				}
				AND = {
					FROM = {
						is_female = yes
					}
					is_female = no
				}
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			is_married = no
			is_betrothed = no
			nor = {
				trait = courting
				FROM = {
					trait = courting
				}
			}
			culture_group = FROM
		}
		effect = {
			log = "work decision elven_courting_decision for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					set_variable = {
						which = "courting_score"
						value = 0
					}
					clr_character_flag = asking_for_matrilineal
					clr_character_flag = landless_fiancee_flag
				}
				clr_character_flag = asking_for_matrilineal
				clr_character_flag = landless_fiancee_flag
				add_character_modifier = {
					name = courting_timer
					hidden = yes
					duration = 365
				}
				FROM = {
					add_character_modifier = {
						name = courting_timer
						hidden = yes
						duration = 365
					}
				}
				# Set targets, pray gods of coding.
				character_event = {
					id = selfmarriage.1
				}
			}
		}
		revoke_allowed = {
			always = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.15
			}
			# Main reasons
			modifier = {
				factor = 0.5
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 0.15
				FROM = {
					NOT = {
						religion_group = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					is_female = yes
				} #Less likely to be the ones starting the courting
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_close_relative = ROOT
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						religion = atharti
					}
					father = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						religion = atharti
					}
					mother = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					NOT = {
						religion = atharti
					}
					any_child = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.25				
				FROM = {
					NOR = {
						higher_tier_than = DUKE
						father_even_if_dead = {
							higher_tier_than = DUKE
						}
						mother_even_if_dead = {
							higher_tier_than = DUKE
						}
					}
				}
				OR = {
					trait = phoenix_king
					father_even_if_dead = {
						trait = phoenix_king
					}
					mother_even_if_dead = {
						trait = phoenix_king
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = infertile
				}
			}
			modifier = {
				#Provincial scum
				factor = 0.75
				FROM = {
					capital_scope = {
						empire = {
							title = e_ulthuan
						}
					}
				}
				NOT = {
					capital_scope = {
						empire = {
							title = e_ulthuan
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						age = 30
					}
				}
				NOT = {
					age = 30
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					age = 30
				}
				age = 30
			}
			modifier = {
				factor = 1.35
				FROM = {
					age = 40
				}
			}
			modifier = {
				factor = 1.5
				father = {
					current_heir = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 1.5
				mother = {
					current_heir = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.75
				num_of_children = 2
			}
			modifier = {
				factor = 0.95
				NOT = {
					piety = 0
				}
			}
			modifier = {
				factor = 0.65
				NOT = {
					prestige = 0
				}
			}
			modifier = {
				factor = 1.25
				prestige = 100
			}
			modifier = {
				factor = 1.25
				prestige = 300
			}
			modifier = {
				factor = 1.25
				prestige = 500
			}
			modifier = {
				factor = 1.25
				prestige = 700
			}
			modifier = {
				factor = 1.25
				prestige = 900
			}
			modifier = {
				factor = 0.75
				NOT = {
					wealth = 0
				}
			}
			modifier = {
				factor = 0.85
				NOT = {
					wealth = 150
				}
			}
			modifier = {
				factor = 0.95
				NOT = {
					wealth = 250
				}
			}
			modifier = {
				factor = 1.15
				wealth = 150
			}
			modifier = {
				factor = 1.15
				wealth = 250
			}
			modifier = {
				factor = 1.15
				wealth = 500
			}
			modifier = {
				factor = 1.25
				dynasty = FROM
			}
			modifier = {
				factor = 0.45
				trait = infertile
			}
			modifier = {
				factor = 0
				OR = {
					father = {
						character = FROM
					}
					mother = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0.25
				is_close_relative = FROM
			}
			modifier = {
				factor = 0.65
				NOT = {
					culture = FROM
				}
			}
			modifier = {
				#Safeguard the Princedoms' integrity
				factor = 0.35
				NOT = {
					culture = FROM
				}
				OR = {
					higher_tier_than = DUKE
					father_even_if_dead = {
						higher_tier_than = DUKE
					}
					mother_even_if_dead = {
						higher_tier_than = DUKE
					}
				}
				OR = {
					FROM = {
						higher_tier_than = DUKE
					}
					FROM = {
						father_even_if_dead = {
							higher_tier_than = DUKE
						}
					}
					FROM = {
						mother_even_if_dead = {
							higher_tier_than = DUKE
						}
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					tier = BARON
					father_even_if_dead = {
						tier = BARON
					}
					mother_even_if_dead = {
						tier = BARON
					}
				}
				OR = {
					FROM = {
						tier = BARON
					}
					FROM = {
						father_even_if_dead = {
							tier = BARON
						}
					}
					FROM = {
						mother_even_if_dead = {
							tier = BARON
						}
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					tier = COUNT
					father_even_if_dead = {
						tier = COUNT
					}
					mother_even_if_dead = {
						tier = COUNT
					}
				}
				OR = {
					FROM = {
						tier = COUNT
					}
					FROM = {
						father_even_if_dead = {
							tier = COUNT
						}
					}
					FROM = {
						mother_even_if_dead = {
							tier = COUNT
						}
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					tier = DUKE
					father_even_if_dead = {
						tier = DUKE
					}
					mother_even_if_dead = {
						tier = DUKE
					}
				}
				OR = {
					FROM = {
						tier = DUKE
					}
					FROM = {
						father_even_if_dead = {
							tier = DUKE
						}
					}
					FROM = {
						mother_even_if_dead = {
							tier = DUKE
						}
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					tier = KING
					father_even_if_dead = {
						tier = KING
					}
					mother_even_if_dead = {
						tier = KING
					}
				}
				OR = {
					FROM = {
						tier = KING
					}
					FROM = {
						father_even_if_dead = {
							tier = KING
						}
					}
					FROM = {
						mother_even_if_dead = {
							tier = KING
						}
					}
				}
			}
			modifier = {
				factor = 2
				OR = {
					tier = EMPEROR
					father_even_if_dead = {
						tier = EMPEROR
					}
					mother_even_if_dead = {
						tier = EMPEROR
					}
				}
				OR = {
					FROM = {
						tier = EMPEROR
					}
					FROM = {
						father_even_if_dead = {
							tier = EMPEROR
						}
					}
					FROM = {
						mother_even_if_dead = {
							tier = EMPEROR
						}
					}
				}
			}
			modifier = {
				factor = 0.15
				is_ruler = yes
				FROM = {
					is_ruler = no
					father_even_if_dead = {
						is_ruler = no
					}
					mother_even_if_dead = {
						is_ruler = no
					}
				}
			}
			modifier = {
				factor = 0.15
				is_ruler = no
				FROM = {
					OR = {
						is_ruler = yes
						father_even_if_dead = {
							is_ruler = yes
						}
						mother_even_if_dead = {
							is_ruler = yes
						}
					}
				}
			}
			modifier = {
				factor = 0.35
				higher_tier_than = COUNT
				FROM = {
					is_ruler = yes
					lower_tier_than = DUKE
					father_even_if_dead = {
						lower_tier_than = DUKE
					}
					mother_even_if_dead = {
						lower_tier_than = DUKE
					}
				}
			}
			#Sentimental reasons
			modifier = {
				factor = 0.95
				trait = homosexual
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = homosexual
				}
			}
			modifier = {
				factor = 4
				is_lover = FROM
			}
			modifier = {
				factor = 0.85
				NOT = {
					is_lover = FROM
				}
				has_lover = yes
			}
			modifier = {
				factor = 2.5
				is_friend = FROM
			}
			modifier = {
				factor = 0.15
				is_rival = FROM
			}
			modifier = {
				factor = 1.5
				FROM = {
					wh_has_any_magic_potential_reveal_trigger = no
				}
				wh_has_any_magic_potential_reveal_trigger = yes
			}
			modifier = {
				factor = 1.25
				FROM = {
					OR = {
						trait = amateurish_plotter
						trait = flamboyant_schemer
						trait = intricate_webweaver
						trait = elusive_shadow
					}
				}
				OR = {
					trait = amateurish_plotter
					trait = flamboyant_schemer
					trait = intricate_webweaver
					trait = elusive_shadow
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					OR = {
						trait = naive_appeaser
						trait = underhanded_rogue
						trait = charismatic_negotiator
						trait = grey_eminence
					}
				}
				OR = {
					trait = naive_appeaser
					trait = underhanded_rogue
					trait = charismatic_negotiator
					trait = grey_eminence
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					OR = {
						trait = indulgent_wastrel
						trait = thrifty_clerk
						trait = fortune_builder
						trait = midas_touched
					}
				}
				OR = {
					trait = indulgent_wastrel
					trait = thrifty_clerk
					trait = fortune_builder
					trait = midas_touched
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					OR = {
						trait = misguided_warrior
						trait = tough_soldier
						trait = skilled_tactician
						trait = brilliant_strategist
					}
				}
				OR = {
					trait = misguided_warrior
					trait = tough_soldier
					trait = skilled_tactician
					trait = brilliant_strategist
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					OR = {
						trait = detached_priest
						trait = martial_cleric
						trait = scholarly_theologian
						trait = mastermind_theologian
					}
				}
				OR = {
					trait = detached_priest
					trait = martial_cleric
					trait = scholarly_theologian
					trait = mastermind_theologian
				}
			}
			modifier = {
				factor = 1.25
				trait = haughty
			}
			modifier = {
				factor = 0.9
				trait = stressed
			}
			modifier = {
				factor = 0.9
				trait = depressed
			}
			modifier = {
				factor = 0.9
				trait = lunatic_1
			}
			modifier = {
				factor = 0.8
				trait = lunatic_2
			}
			modifier = {
				factor = 0.7
				trait = lunatic_3
			}
			modifier = {
				factor = 0.9
				trait = ill
			}
			modifier = {
				factor = 0.8
				trait = pneumonic
			}
			modifier = {
				factor = 0.7
				trait = syphilitic
			}
			modifier = {
				factor = 0.9
				is_ill = yes
			}
			modifier = {
				factor = 0.9
				trait = scarred
			}
			modifier = {
				factor = 0.9
				trait = clubfooted
			}
			modifier = {
				factor = 0.8
				trait = harelip
			}
			modifier = {
				factor = 0.7
				trait = hunchback
			}
			modifier = {
				factor = 0.9
				trait = lisp
			}
			modifier = {
				factor = 0.9
				trait = stutter
			}
			modifier = {
				factor = 0.6
				trait = dwarf
			}
			modifier = {
				factor = 1.5
				trait = asur_mage
				FROM = {
					trait = asur_mage
				}
			}
			modifier = {
				factor = 1.25
				trait = socializer
				FROM = {
					trait = socializer
				}
			}
			modifier = {
				factor = 1.25
				trait = gamer
				FROM = {
					trait = gamer
				}
			}
			modifier = {
				factor = 1.25
				trait = hedonist
				FROM = {
					trait = hedonist
				}
			}
			modifier = {
				factor = 1.25
				trait = duelist
				FROM = {
					trait = duelist
				}
			}
			modifier = {
				factor = 1.25
				trait = hunter
				FROM = {
					trait = hunter
				}
			}
			modifier = {
				factor = 1.25
				trait = strategist
				FROM = {
					trait = strategist
				}
			}
			modifier = {
				factor = 1.25
				trait = administrator
				FROM = {
					trait = administrator
				}
			}
			modifier = {
				factor = 1.25
				trait = architect
				FROM = {
					trait = architect
				}
			}
			modifier = {
				factor = 1.25
				trait = gardener
				FROM = {
					trait = gardener
				}
			}
			modifier = {
				factor = 1.25
				trait = schemer
				FROM = {
					trait = schemer
				}
			}
			modifier = {
				factor = 1.25
				trait = impaler
				FROM = {
					trait = impaler
				}
			}
			modifier = {
				factor = 0.75
				trait = impaler
				FROM = {
					NOR = {
						trait = impaler
						trait = cruel
					}
				}
			}
			modifier = {
				factor = 1.5
				trait = seducer
				FROM = {
					trait = seductress
				}
			}
			modifier = {
				factor = 1.5
				trait = seductress
				FROM = {
					trait = seducer
				}
			}
			modifier = {
				factor = 1.25
				trait = scholar
				FROM = {
					trait = scholar
				}
			}
			modifier = {
				factor = 1.25
				trait = theologian
				FROM = {
					trait = theologian
				}
			}
			modifier = {
				factor = 1.25
				trait = mystic
				FROM = {
					trait = mystic
				}
			}
			modifier = {
				factor = 1.5
				trait = celibate
				FROM = {
					trait = celibate
				}
			}
			modifier = {
				factor = 0.75
				trait = celibate
				FROM = {
					NOT = {
						trait = celibate
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					trait = celibate
				}
				FROM = {
					trait = celibate
				}
			}
			modifier = {
				factor = 1.25
				trait = poet
				FROM = {
					trait = poet
				}
			}
			modifier = {
				factor = 1.25
				trait = falconer
				FROM = {
					trait = falconer
				}
			}
			modifier = {
				factor = 1.25
				trait = chaste
				FROM = {
					trait = chaste
				}
			}
			modifier = {
				factor = 1.25
				trait = lustful
				FROM = {
					trait = lustful
				}
			}
			modifier = {
				factor = 1.25
				trait = lustful
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = lustful
				}
			}
			modifier = {
				factor = 1.25
				trait = temperate
			}
			modifier = {
				factor = 0.85
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = charitable
				FROM = {
					NOT = {
						trait = greedy
					}
				}
			}
			modifier = {
				factor = 1.5
				trait = kind
				FROM = {
					NOT = {
						trait = cruel
					}
				}
			}
			modifier = {
				factor = 0.85
				trait = wroth
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 0.85
				trait = deceitful
				FROM = {
					NOT = {
						trait = deceitful
					}
				}
			}
			modifier = {
				factor = 1.25
				trait = honest
				FROM = {
					NOT = {
						trait = deceitful
					}
				}
			}
			modifier = {
				factor = 0.85
				trait = craven
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.15
				trait = shy
			}
			modifier = {
				factor = 0.95
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 1.15
				trait = content
			}
			modifier = {
				factor = 0.85
				trait = arbitrary
				FROM = {
					NOT = {
						trait = arbitrary
					}
				}
			}
			modifier = {
				factor = 1.25
				trait = just
				FROM = {
					NOT = {
						trait = arbitrary
					}
				}
			}
			modifier = {
				factor = 0.85
				trait = cynical
				FROM = {
					NOT = {
						trait = cynical
					}
				}
			}
			modifier = {
				factor = 1.25
				trait = zealous
				FROM = {
					NOT = {
						trait = cynical
					}
				}
			}
			modifier = {
				factor = 0.95
				trait = paranoid
			}
			modifier = {
				factor = 0.85
				trait = trusting
			}
			modifier = {
				factor = 1.35
				trait = gregarious
			}
			modifier = {
				factor = 0.95
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 0.95
				trait = slothful
			}
			modifier = {
				factor = 0.85
				trait = cruel
				FROM = {
					NOR = {
						trait = cruel
						trait = impaler
					}
				}
			}
			modifier = {
				factor = 1.35
				trait = erudite
			}
			modifier = {
				factor = 1.15
				trait = stubborn
			}
			modifier = {
				factor = 0.85
				trait = fat
			}
			modifier = {
				factor = 1.15
				trait = undernourished
			}
			modifier = {
				factor = 0.85
				trait = blinded
			}
			modifier = {
				factor = 0.65
				trait = disfigured
			}
			modifier = {
				factor = 1.5
				has_artifact = black_dragon_mount
			}
			modifier = {
				factor = 1.5
				has_artifact = blue_dragon_mount
			}
			modifier = {
				factor = 1.5
				has_artifact = gold_dragon_mount
			}
			modifier = {
				factor = 1.5
				has_artifact = red_dragon_mount
			}
			modifier = {
				factor = 1.5
				has_artifact = white_dragon_mount
			}
			modifier = {
				factor = 0.5
				trait = burnt_by_asuryan
			}
			modifier = {
				factor = 0
				trait = burnt_by_asuryan
				FROM = {
					culture_group = asur_group
				}
			}
			modifier = {
				factor = 0.75
				trait = asuryan_stain
				FROM = {
					culture_group = asur_group
				}
			}
			modifier = {
				factor = 0.15
				culture_group = druchi_group
				FROM = {
					culture_group = asur_group
				}
			}
			modifier = {
				factor = 0.5
				culture_group = asrai_group
				FROM = {
					culture_group = asur_group
				}
			}
			modifier = {
				factor = 0.85
				trait = interventionist_elf
				FROM = {
					trait = isolationist_elf
				}
			}
			modifier = {
				factor = 0.85
				trait = isolationist_elf
				FROM = {
					trait = interventionist_elf
				}
			}
			modifier = {
				factor = 0.5
				trait = mutation_minor
			}
			modifier = {
				factor = 0.25
				trait = mutation_major
			}
			modifier = {
				factor = 0
				trait = mutation_massive
			}
			modifier = {
				factor = 0
				trait = avatar_isha
				FROM = {
					NOT = {
						trait = avatar_kurnous
					}
				}
			}
			modifier = {
				factor = 0
				trait = avatar_kurnous
				FROM = {
					NOT = {
						trait = avatar_isha
					}
				}
			}
			modifier = {
				factor = 10
				trait = avatar_kurnous
				FROM = {
					trait = avatar_isha
				}
			}
			modifier = {
				factor = 10
				trait = avatar_isha
				FROM = {
					trait = avatar_kurnous
				}
			}
			modifier = {
				factor = 2
				trait = asrai_spellsinger
				FROM = {
					trait = asrai_spellsinger
				}
			}
			modifier = {
				factor = 0.5
				trait = hollowed
			}
			modifier = {
				factor = 1.75
				trait = druchi_black_guard
				FROM = {
					culture_group = druchi_group
				}
			}
			modifier = {
				factor = 1.35
				trait = elven_maiden
				FROM = {
					trait = elven_scion
				}
			}
			modifier = {
				factor = 1.35
				trait = elven_scion
				FROM = {
					trait = elven_maiden
				}
			}
			modifier = {
				factor = 1.15
				trait = bright
			}
			modifier = {
				factor = 1.25
				trait = smart
			}
			modifier = {
				factor = 1.35
				trait = quick
			}
			modifier = {
				factor = 1.45
				trait = brilliant
			}
			modifier = {
				factor = 1.5
				trait = genius
			}
			modifier = {
				factor = 0.95
				trait = dim
			}
			modifier = {
				factor = 0.85
				trait = dumb
			}
			modifier = {
				factor = 0.75
				trait = slow
			}
			modifier = {
				factor = 0.65
				trait = idiot
			}
			modifier = {
				factor = 0.5
				trait = imbecile
			}
			modifier = {
				factor = 0.75
				trait = strong
			}
			modifier = {
				factor = 0.85
				trait = tough
			}
			modifier = {
				factor = 0.95
				trait = hardy
			}
			modifier = {
				factor = 0.85
				trait = robust
			}
			modifier = {
				factor = 1.15
				trait = soft
			}
			modifier = {
				factor = 1.25
				trait = fragile
			}
			modifier = {
				factor = 1.35
				trait = weak
			}
			modifier = {
				factor = 1.75
				trait = beautiful
			}
			modifier = {
				factor = 1.5
				trait = pretty
			}
			modifier = {
				factor = 1.25
				trait = fair
			}
			modifier = {
				factor = 0.75
				trait = plain
			}
			modifier = {
				factor = 0.65
				trait = ugly
			}
			modifier = {
				factor = 0.5
				trait = unsightly
			}
			modifier = {
				factor = 0.45
				trait = monstrous
			}
			modifier = {
				factor = 1.25
				trait = tall
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	asur_buy_favour = {
		# use your connections to buy a favor from another ruler
		only_playable = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			age = 16
			NOT = {
				has_character_flag = recently_asked_isofavor
			}
			trait = isolationist_elf
		}
		potential = {
			age = 16
			nor = {
				character = FROM
				trait = phoenix_king
			}
			OR = {
				trait = isolationist_elf
				trait = interventionist_elf
			}
			OR = {
				AND = {
					FROM = {
						trait = interventionist_elf
					}
					trait = interventionist_elf
				}
				AND = {
					FROM = {
						trait = isolationist_elf
					}
					trait = isolationist_elf
				}
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			NOT = {
				owes_favor_to = FROM
			}
			OR = {
				AND = {
					FROM = {
						prestige = 100
					}
					tier = BARON
				}
				AND = {
					FROM = {
						prestige = 250
					}
					tier = COUNT
				}
				AND = {
					FROM = {
						prestige = 500
					}
					tier = DUKE
				}
				AND = {
					FROM = {
						prestige = 1000
					}
					tier = KING
				}
				AND = {
					FROM = {
						prestige = 2000
					}
					tier = EMPEROR
				}
			}
		}
		effect = {
			log = "work decision asur_buy_favour for [Root.GetBestName]"
 			if = {
				limit = {
					ROOT = {
						tier = BARON
					}
				}
				FROM = {
					prestige = -100
				}
			}
			if = {
				limit = {
					ROOT = {
						tier = COUNT
					}
				}
				FROM = {
					prestige = -250
				}
			}
			if = {
				limit = {
					ROOT = {
						tier = DUKE
					}
				}
				FROM = {
					prestige = -500
				}
			}
			if = {
				limit = {
					ROOT = {
						tier = KING
					}
				}
				FROM = {
					prestige = -1000
				}
			}
			if = {
				limit = {
					ROOT = {
						tier = EMPEROR
					}
				}
				FROM = {
					prestige = -2000
				}
			}
			set_character_flag = recently_asked_isofavor
			hidden_tooltip = {
				long_character_event = {
					id = asurdebate.19
					days = 5
					random = 5
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
			#the Opponent's traits
			modifier = {
				factor = 1.25
				trait = gregarious
			}
			modifier = {
				factor = 1.25
				trait = patient
			}
			modifier = {
				factor = 1.25
				diplomacy = 20
			}
			modifier = {
				factor = 0.85
				trait = shy
			}
			modifier = {
				factor = 0.85
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = slow
			}
			modifier = {
				factor = 2
				trait = imbecile
			}
			modifier = {
				factor = 0.75
				prestige = 500
			}
			modifier = {
				factor = 0.75
				prestige = 1500
			}
			modifier = {
				factor = 0.75
				prestige = 2500
			}
			modifier = {
				factor = 0.75
				prestige = 3000
			}
			#the Challengers traits
			modifier = {
				factor = 1.5
				FROM = {
					is_lover = ROOT
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					is_friend = ROOT
				}
			}
			modifier = {
				factor = 0.35
				FROM = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					higher_tier_than = ROOT
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					lower_tier_than = ROOT
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = phoenix_king
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = everqueen
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					prestige = 3000
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = quick
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = bright
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = brilliant
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = genius
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = patient
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					diplomacy = 20
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					religion = cult_of_pleasure
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	make_asur_supercourtier = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		from_potential = {
			culture_group = asur_group
			nor = {
				religion = asrai_cadai
				has_landed_title = e_ulthuan
			}
			trait = creature_elf
		}
		potential = {
			is_ruler = no
			culture_group = asur_group
			is_close_relative = FROM
			trait = creature_elf
			age = 16
			OR = {
				trait = elven_scion
				trait = elven_maiden
			}
			nor = {
				religion = asrai_cadai
				trait = asur_mage
				trait = mage_apprentice
				trait = everqueen_heir
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			e_ulthuan = {
				holder_scope = {
					religion_group = cadai_group
					NOT = {
						num_of_vassals = 35
					}
				}
			}
			is_ruler = no
			OR = {
				FROM = {
					capital_scope = {
						empire = {
							title = e_ulthuan
						}
					}
				}
				e_ulthuan = {
					holder_scope = {
						trait = interventionist_elf
					}
				}
			}
			OR = {
				FROM = {
					wealth = 150
					capital_scope = {
						empire = {
							title = e_ulthuan
						}
					}
				}
				FROM = {
					wealth = 300
					NOT = {
						capital_scope = {
							empire = {
								title = e_ulthuan
							}
						}
					}
				}
			}
		}
		effect = {
			log = "work decision make_asur_supercourtier for [Root.GetBestName]"
			if = {
				limit = {
					FROM = {
						capital_scope = {
							empire = {
								title = e_ulthuan
							}
						}
					}
				}
				FROM = {
					wealth = -150
				}
			}
			if = {
				limit = {
					FROM = {
						NOT = {
							capital_scope = {
								empire = {
									title = e_ulthuan
								}
							}
						}
					}
				}
				FROM = {
					wealth = -300
				}
			}
			e_ulthuan = {
				holder_scope = {
					letter_event = {
						id = asur.54
					}
				}
			}
		}
		revoke_allowed = {
			always = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					dynasty = FROM
				}
			}
			modifier = {
				factor = 0
				nor = {
					father = {
						character = FROM
					}
					mother = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 50
				OR = {
					father = {
						character = FROM
					}
					mother = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 1.35
				trait = quick
			}
			modifier = {
				factor = 1.25
				trait = bright
			}
			modifier = {
				factor = 1.45
				trait = smart
			}
			modifier = {
				factor = 1.5
				trait = quick
			}
			modifier = {
				factor = 1.75
				trait = brilliant
			}
			modifier = {
				factor = 1.95
				trait = genius
			}
			modifier = {
				factor = 0.85
				trait = dim
			}
			modifier = {
				factor = 0.75
				trait = dumb
			}
			modifier = {
				factor = 0.65
				trait = slow
			}
			modifier = {
				factor = 0.5
				trait = idiot
			}
			modifier = {
				factor = 0.45
				trait = imbecile
			}
			modifier = {
				factor = 1.25
				trait = gregarious
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.75
				trait = slothful
			}
			modifier = {
				factor = 5
				FROM = {
					tier = KING
				}
			}
			modifier = {
				factor = 2
				FROM = {
					current_heir = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					current_heir = {
						is_married = no
					}
				}
			}
			modifier = {
				#Better send him to wizardry school
				factor = 0
				wh_has_any_magic_potential_reveal_trigger = yes
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	help_colony = {
		only_playable = yes
		ai_target_filter = court	#active only for players
		from_potential = {
			ai = no
			higher_tier_than = COUNT
			trait = creature_elf
			trait = interventionist_elf
		}
		potential = {
			trait = creature_elf
			religion_group = cadai_group
			nor = {
				capital_scope = {
					empire = {
						title = e_ulthuan
					}
				}
				any_consort = {
					character = FROM
				}
			}
		}
		allow = {
			war = yes
			# Ulthuan will never answer to help against other Asur
			any_war = {
				OR = {
					defender = {
						NOT = {
							trait = creature_elf
							religion_group = cadai_group
						}
					}
 					attacker = {
						NOT = {
							trait = creature_elf
							religion_group = cadai_group
						}
					}
				}
			}
		}
		effect = {
			log = "work decision  attacker for [Root.GetBestName]"
			character_event = {
				id = asur.45
			}
			FROM = {
				join_defender_wars = ROOT
				join_attacker_wars = ROOT
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}
	asur_debate_decision = {
		only_playable = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			age = 16
			NOT = {
				is_liege_of = ROOT
			}
			OR = {
				trait = isolationist_elf
				trait = interventionist_elf
			}
			OR = {
				ai = no
				higher_tier_than = COUNT
			}
		}
		potential = {
			age = 16
			NOT = {
				character = FROM
			}
			OR = {
				trait = isolationist_elf
				trait = interventionist_elf
			}
			OR = {
				AND = {
					FROM = {
						trait = isolationist_elf
					}
					trait = interventionist_elf
				}
				AND = {
					FROM = {
						trait = interventionist_elf
					}
					trait = isolationist_elf
				}
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				NOT = {
					has_opinion_modifier = {
						who = ROOT modifier = opinion_fled_debate
					}
				}
			}
			war = no
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			FROM = {
				prestige = 50
				piety = 10
			}
			custom_tooltip = {
				text = debate_tooltip_fought_before
				hidden_tooltip = {
					NOT = {
						has_opinion_modifier = {
							who = FROM
							modifier = opinion_fought_debate
						}
					}
					FROM = {
						nor = {
							has_character_modifier = recent_debate_timer
							has_opinion_modifier = {
								who = ROOT modifier = opinion_fought_debate
							}
						}
					}
				}
			}
			hidden_tooltip = {
				not = {
					has_character_flag = do_not_disturb
				}
			}
			custom_tooltip = {
				text = debate_tooltip_recent_debate
				hidden_tooltip = {
					nor = {
						FROM = {
							has_character_modifier = recent_debate_victory
						}
						has_character_modifier = recent_debate_timer
					}
				}
			}
		}
		effect = {
			log = "work decision asur_debate_decision for [Root.GetBestName]"
			FROM = {
				add_character_modifier = {
					modifier = recent_debate_timer
					duration = 365
					hidden = yes
				}
			}
			hidden_tooltip = {
				character_event = {
					id = asurdebate.11000
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_character_modifier = declined_prestige_debate_timer
			}
			modifier = {
				factor = 0.5
			}
			#the Opponent's traits
			modifier = {
				factor = 0.75
				trait = quick
			}
			modifier = {
				factor = 0.75
				trait = bright
			}
			modifier = {
				factor = 0.75
				trait = brilliant
			}
			modifier = {
				factor = 0.75
				trait = genius
			}
			modifier = {
				factor = 0.75
				trait = gregarious
			}
			modifier = {
				factor = 0.75
				trait = patient
			}
			modifier = {
				factor = 0.75
				diplomacy = 20
			}
			modifier = {
				factor = 1.5
				trait = shy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = slow
			}
			modifier = {
				factor = 2
				trait = imbecile
			}
			modifier = {
				factor = 1.25
				trait = isolationist_elf
			}
			#the Challengers traits
			modifier = {
				factor = 1.5
				FROM = {
					trait = quick
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = bright
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = brilliant
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = genius
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = patient
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					diplomacy = 20
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					religion = cult_of_pleasure
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 4
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	send_asur_apprentice = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		from_potential = {
			religion_group = cadai_group
			NOT = {
				religion = asrai_cadai
			}
			trait = creature_elf
		}
		potential = {
			is_landed = no
			religion_group = cadai_group
			trait = creature_elf
			age = 6
			nor = {
				religion = asrai_cadai
				trait = asur_mage
				trait = mage_apprentice
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			c_hoeth = {
				holder_scope = {
					religion_group = cadai_group
					top_liege = {
						has_landed_title = e_ulthuan
					}
				}
			}
			e_ulthuan = {
				holder_scope = {
					religion_group = cadai_group
				}
			}
			is_landed = no
			OR = {
				AND = {
					NOT = {
						age = 12
					}
					FROM = {
						wealth = 450
						capital_scope = {
							empire = {
								title = e_ulthuan
							}
						}
					}
				}
				AND = {
					age = 12
					FROM = {
						wealth = 750
					}
					capital_scope = {
						empire = {
							title = e_ulthuan
						}
					}
				}
				AND = {
					NOT = {
						age = 12
					}
					FROM = {
						wealth = 850
						NOT = {
							capital_scope = {
								empire = {
									title = e_ulthuan
								}
							}
						}
					}
				}
				AND = {
					age = 12
					FROM = {
						wealth = 1250
					}
					NOT = {
						capital_scope = {
							empire = {
								title = e_ulthuan
							}
						}
					}
				}
			}
		}
		effect = {
			log = "work decision send_asur_apprentice for [Root.GetBestName]"
			if = {
				limit = {
					age = 12
					FROM = {
						capital_scope = {
							empire = {
								title = e_ulthuan
							}
						}
					}
				}
				FROM = {
					wealth = -750
				}
			}
			if = {
				limit = {
					NOT = {
						age = 12
					}
					FROM = {
						capital_scope = {
							empire = {
								title = e_ulthuan
							}
						}
					}
				}
				FROM = {
					wealth = -450
				}
			}
			if = {
				limit = {
					age = 12
					FROM = {
						NOT = {
							capital_scope = {
								empire = {
									title = e_ulthuan
								}
							}
						}
					}
				}
				FROM = {
					wealth = -1250
				}
			}
			if = {
				limit = {
					NOT = {
						age = 12
					}
					FROM = {
						NOT = {
							capital_scope = {
								empire = {
									title = e_ulthuan
								}
							}
						}
					}
				}
				FROM = {
					wealth = -850
				}
			}
			hidden_tooltip = {
				if = {
					limit = {
						FROM = {
							trait = creature_elf
							is_female = no
						}
						e_naggaroth = {
							holder_scope  = {
								trait = malekith
							}
						}
					}
					e_naggaroth = {
						holder_scope  = {
							opinion = {
								modifier = opinion_sorcerous_rival
								who = FROM
							}
						}
					}
				}
			}
			character_event = {
				id = highelfmagic.2
			}
		}
		revoke_allowed = {
			always = yes
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					dynasty = FROM
				}
			}
			modifier = {
				factor = 0
				nor = {
					father = {
						character = FROM
					}
					mother = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 50
				OR = {
					father = {
						character = FROM
					}
					mother = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 1.35
				trait = quick
			}
			modifier = {
				factor = 1.25
				trait = bright
			}
			modifier = {
				factor = 1.45
				trait = smart
			}
			modifier = {
				factor = 1.5
				trait = quick
			}
			modifier = {
				factor = 1.75
				trait = brilliant
			}
			modifier = {
				factor = 1.95
				trait = genius
			}
			modifier = {
				factor = 0.85
				trait = dim
			}
			modifier = {
				factor = 0.75
				trait = dumb
			}
			modifier = {
				factor = 0.65
				trait = slow
			}
			modifier = {
				factor = 0.5
				trait = idiot
			}
			modifier = {
				factor = 0.45
				trait = imbecile
			}
			modifier = {
				factor = 1.25
				trait = gregarious
			}
			modifier = {
				factor = 1.25
				trait = ambitious
			}
			modifier = {
				factor = 1.5
				trait = diligent
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.75
				trait = slothful
			}
			modifier = {
				factor = 0.001
				age = 16
			}
			modifier = {
				factor = 0
				age = 16
				wh_has_any_magic_potential_reveal_trigger = no
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	asur_force_stance_favour = {
		only_playable = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			age = 16
			OR = {
				trait = isolationist_elf
				trait = interventionist_elf
			}
		}
		potential = {
			age = 16
			nor = {
				character = FROM
				# only through faction
				trait = phoenix_king
			}
			OR = {
				trait = isolationist_elf
				trait = interventionist_elf
			}
			OR = {
				AND = {
					FROM = {
						trait = isolationist_elf
					}
					trait = interventionist_elf
				}
				AND = {
					FROM = {
						trait = interventionist_elf
					}
					trait = isolationist_elf
				}
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				NOT = {
					has_opinion_modifier = {
						who = ROOT modifier = opinion_fled_debate
					}
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			war = no
			FROM = {
				prestige = 50
				piety = 10
			}
			owes_favor_to = FROM
			custom_tooltip = {
				text = debate_tooltip_fought_before
				hidden_tooltip = {
					NOT = {
						has_opinion_modifier = {
							who = FROM
							modifier = opinion_fought_debate
						}
					}
					FROM = {
						nor = {
							has_character_modifier = recent_debate_timer
							has_opinion_modifier = {
								who = ROOT modifier = opinion_fought_debate
							}
						}
					}
				}
			}
			hidden_tooltip = {
				NOT = {
					has_character_flag = do_not_disturb
				}
			}
			custom_tooltip = {
				text = debate_tooltip_recent_debate
				hidden_tooltip = {
					nor = {
						FROM = {
							has_character_modifier = recent_debate_victory
						}
						has_character_modifier = recent_debate_timer
					}
				}
			}
		}
		effect = {
			log = "work decision asur_force_stance_favour for [Root.GetBestName]"
			reverse_remove_favor = FROM
			FROM = {
				prestige = -150
				add_character_modifier = {
					modifier = recent_debate_timer
					duration = 365
					hidden = yes
				}
			}
			hidden_tooltip = {
				character_event = {
					id = asurdebate.12
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_character_modifier = declined_prestige_debate_timer
			}
			modifier = {
				factor = 0.5
			}
			#the Opponent's traits
			modifier = {
				factor = 0.75
				trait = quick
			}
			modifier = {
				factor = 0.75
				trait = bright
			}
			modifier = {
				factor = 0.75
				trait = brilliant
			}
			modifier = {
				factor = 0.75
				trait = genius
			}
			modifier = {
				factor = 0.75
				trait = gregarious
			}
			modifier = {
				factor = 0.75
				trait = patient
			}
			modifier = {
				factor = 0.75
				diplomacy = 20
			}
			modifier = {
				factor = 1.5
				trait = shy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = slow
			}
			modifier = {
				factor = 2
				trait = imbecile
			}
			modifier = {
				factor = 1.25
				trait = isolationist_elf
			}
			#the Challengers traits
			modifier = {
				factor = 1.5
				FROM = {
					trait = quick
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = bright
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = brilliant
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = genius
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = patient
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					diplomacy = 20
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					religion = cult_of_pleasure
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 4
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	asur_meeting_decision = {
		only_playable = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			age = 16
			trait = isolationist_elf
			trait = creature_elf
			culture_group = asur_group
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			# Dumb AI conditions
			OR = {
				ai = no
				AND = {
					ROOT = {
						wealth = 150
					}
					NOT = {
						wealth = 0
					}
				}
				owes_favor_to = ROOT #Wants to clear a favor
				trait = ambitious #Just wants a favor
				AND = {
					ROOT = {
						any_spouse = {
							any_rival =  {
								character = FROM
							}
						}
					}
					NOT = {
						any_rival = {
							character = ROOT
						}
					}
				}
				#Wants to separate friend from rival
				ROOT = {
					is_married = yes
					any_lover = {
						character = ROOT
					}
				}
				#Wants to separate lover from other guy
				AND = {
					is_married = no
					trait = creature_elf
					NOT = {
						cannot_marry_trigger = yes
					}
					ROOT = {
						is_married = no
						trait = creature_elf
						NOT = {
							cannot_marry_trigger = yes
						}
						higher_tier_than = FROM
					}
					OR = {
						AND = {
							is_female = no
							ROOT = {
								is_female = yes
							}
						}
						AND = {
							is_female = yes
							ROOT = {
								is_female = no
							}
						}
					}
				}
				#Social climber
				ROOT = {
					any_rival = {
						character = FROM
					}
				}
			}
		}
		potential = {
			age = 16
			is_ruler = yes
			culture_group = asur_group
			trait = creature_elf
			location = {
				region = world_ulthuan
			}
			NOT = {
				character = FROM
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				NOT = {
					has_opinion_modifier = {
						who = ROOT modifier = opinion_fled_debate
					}
				}
				prestige = 1
			}
			war = no
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			custom_tooltip = {
				text = debate_tooltip_fought_before
				hidden_tooltip = {
					NOT = {
						has_opinion_modifier = {
							who = FROM
							modifier = opinion_fought_debate
						}
					}
					FROM = {
						nor = {
							has_character_modifier = recent_debate_timer
							has_opinion_modifier = {
								who = ROOT modifier = opinion_fought_debate
							}
						}
					}
				}
			}
			hidden_tooltip = {
				NOT = {
					has_character_flag = do_not_disturb
				}
			}
			custom_tooltip = {
				text = debate_tooltip_recent_meeting
				hidden_tooltip = {
					FROM = {
						NOT = {
							has_character_modifier = recent_meeting_timer
						}
					}
				}
			}
		}
		effect = {
			log = "work decision asur_meeting_decision for [Root.GetBestName]"
			prestige = -50
			FROM = {
				add_character_modifier = {
					modifier = recent_meeting_timer
					duration = 1725
					hidden = yes
				}
			}
			hidden_tooltip = {
				letter_event = {
					id = asurdebate.13
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				has_character_modifier = declined_prestige_debate_timer
			}
			modifier = {
				factor = 0.5
			}
			#the Target's traits
			modifier = {
				factor = 0.75
				trait = quick
			}
			modifier = {
				factor = 0.75
				trait = bright
			}
			modifier = {
				factor = 0.75
				trait = brilliant
			}
			modifier = {
				factor = 0.75
				trait = genius
			}
			modifier = {
				factor = 0.75
				trait = gregarious
			}
			modifier = {
				factor = 0.75
				trait = patient
			}
			modifier = {
				factor = 0.75
				diplomacy = 20
			}
			modifier = {
				factor = 1.5
				trait = shy
			}
			modifier = {
				factor = 1.5
				trait = wroth
			}
			modifier = {
				factor = 1.5
				trait = slow
			}
			modifier = {
				factor = 2
				trait = imbecile
			}
			#the Petitioner's traits
			modifier = {
				factor = 1.5
				FROM = {
					trait = quick
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = bright
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = brilliant
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = genius
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = patient
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					diplomacy = 20
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = ambitious
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					trait = deceitful
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = isolationist_elf
				}
				trait = isolationist_elf
			}
			modifier = {
				factor = 2.5
				FROM = {
					any_lover = {
						character = ROOT
					}
				}
				FROM = {
					any_spouse = {
						any_rival = {
							character = FROM
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					owes_favor_to = ROOT
				}
			}
			modifier = {
				factor = 3
				FROM = {
					diplomacy = 15
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					prestige = 200
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					prestige = 400
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					prestige = 600
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					NOT = {
						wealth = -150
					}
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					NOT = {
						wealth = -300
					}
				}
			}
			modifier = {
				factor = 0.01
				NOT = {
					any_rival = {
						character = FROM
					}
				}
				#Wants to shame rival
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -100
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					any_rival = {
						character = FROM
					}
				}
				#Wants to shame rival
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -80
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					any_rival = {
						character = FROM
					}
				}
				#Wants to shame rival
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -60
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					any_rival = {
						character = FROM
					}
				}
				#Wants to shame rival
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -40
						}
					}
				}
			}
			modifier = {
				factor = 0.85
				NOT = {
					any_rival = {
						character = FROM
					}
				}	#Wants to shame rival
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = -20
						}
					}
				}
			}
			modifier = {
				factor = 0.95
				NOT = {
					any_rival = {
						character = FROM
					}
				}	#Wants to shame rival
				FROM = {
					NOT = {
						opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					opinion = {
						who = ROOT
						value = 20
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					opinion = {
						who = ROOT
						value = 40
					}
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					opinion = {
						who = ROOT
						value = 60
					}
				}
			}
			modifier = {
				factor = 1.85
				FROM = {
					opinion = {
						who = ROOT
						value = 80
					}
				}
			}
			modifier = {
				factor = 2.5
				FROM = {
					opinion = {
						who = ROOT
						value = 100
					}
				}
			}
		}
	}
	
	#Asrai
	asrai_ward_apprentice = {
		only_playable = yes
		is_high_prio = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			religion = asrai_cadai
			OR = {
				trait = asrai_spellsinger
				trait = creature_forestspirit
			}
			OR = {
				trait = creature_elf
				trait = creature_forestspirit
			}
			# just one at a time
			NOT = {
				any_friend = {
					trait = mage_apprentice
				}
			}
			OR = {
				trait = brilliant
				trait = smart
				trait = genius
				learning = 15
				trait = creature_forestspirit
			}
		}
		potential = {
			guardian = {
				FROM = {
					character = PREV
				}
			}
			religion = asrai_cadai
			prisoner = no
			trait = creature_elf
			age = 10
			nor = {
				age = 15
				trait = asrai_spellsinger
				trait = mage_apprentice
				has_character_modifier = apprenticeship_refused
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				piety = 50
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
		}
		effect = {
			log = "work decision asrai_ward_apprentice for [Root.GetBestName]"
			FROM = {
				piety = -50
			}
			add_friend = FROM
			character_event = {
				id = spellsinger.16
			}
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = spellsinger.21 days = 450
					}
				}
			}
		}
		revoke_allowed = {
			always = yes
		}
		ai_will_do = {
			factor = 5
		}
	}
	asrai_kidnap = {
		only_playable = yes
		# The fair folk can permanently kidnap any captured human/dwarf child
		is_high_prio = yes
		ai_target_filter = all
		from_potential = {
			age = 14
			religion = asrai_cadai
			OR = {
				trait = creature_elf
				trait = creature_treekin
			}
		}
		potential = {
			prisoner = yes
			host = {
				character = FROM
			}
			NOT = {
				age = 10
				trait = disinherited
				character = FROM
			}
			OR = {
				trait = creature_human
				trait = creature_amazon
				trait = creature_dwarf
				trait = creature_chaos_dwarf
			}
		}
		allow = {
			prisoner = yes
			NOT = {
				age = 10
			}
			FROM =  {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				piety = 25
			}
		}
		effect = {
			log = "work decision asrai_kidnap for [Root.GetBestName]"
			FROM =  {
				piety = -25
				prestige = 25
			}
			if = {
				limit = {
					is_ruler = yes
				}
				abdicate = yes
			}
			move_character = FROM
			add_trait = disinherited
			recalc_succession = yes
			clr_character_flag = captured_in_battle
			opinion = {
				who = FROM
				modifier = opinion_kidnapped_me
			}
			hidden_tooltip = {
				any_sibling = {
					character_event = {
						id = asrai.32
					}
				}
				father = {
					character_event = {
						id = asrai.32
					}
				}
				mother = {
					character_event = {
						id = asrai.32
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05 # Less likely to do it
			}
			modifier = {
				factor = 0
				NOT = {
					piety = 100
				}
			}
			modifier = {
				factor = 0
				any_courtier = {
					trait = disinherited
				}
			}
			modifier = {
				factor = 0.5
				any_courtier = {
					trait = fairy_bred
				}
			}
			modifier = {
				factor = 0 #Enemy has your relative
				FROM = {
					any_current_enemy = {
						dynasty = ROOT
						is_close_relative = ROOT
						any_courtier = {
							is_close_relative = FROM
							dynasty = FROM
						}
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = cruel
						trait = zealous
					}
				}
			}
		}
	}
	asrai_join_war = {
		only_playable = yes
		ai_target_filter = all
		from_potential = {
			OR = {
				trait = creature_elf
				trait = creature_treekin
			}
			religion = asrai_cadai
			capital_scope = {
				region = world_athel_loren
			}
			is_within_diplo_range = ROOT
		}
		potential = {
			is_playable = yes
			nor = {
				religion = asrai_cadai
				religion_group = chaos_gods_group
				religion_group = necromantic_group
				religion_group = nehekharan_gods_group
				religion_group = horned_rat_god_group
				capital_scope = {
					region = world_chaos_wastes
				}
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			nor = {
				FROM = {
					war = yes
				}
				FROM = {
					liege = {
						character = ROOT
					}
				}
			}
			is_within_diplo_range = FROM
			war = yes
			or = {
				is_primary_war_attacker = yes
				is_primary_war_defender = yes
			}
			any_war = {
				# Never joining foreigners in wars against other Asrai
				nor = {
					any_defender = {
						NOT = {
							character = ROOT
						}
						trait = creature_elf
						religion = asrai_cadai
					}
 					any_attacker = {
						NOT = {
							character = ROOT
						}
						trait = creature_elf
						religion = asrai_cadai
					}

				}
				# Cannot join a war when your liege is already involved in it
				nor = {
					any_defender = {
						NOT = {
							character = ROOT
						}
						any_vassal = {
							character = FROM
						}
					}
 					any_attacker = {
						NOT = {
							character = ROOT
						}
						any_vassal = {
							character = FROM
						}
					}
				}
			}
		}
		effect = {
			log = "work decision  any_attacker for [Root.GetBestName]"
			character_event = {
				id = asrai.47
			}
			FROM = {
				join_defender_wars = ROOT
				join_attacker_wars = ROOT
				prestige = 75
				piety = 25
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.01
			}
			modifier = {
				factor = 0.1
				lower_tier_than = DUKE
			}
			modifier = {
				factor = 0.001
				capital_scope = {
					nor = {
						region = world_old_world_empire
						region = world_old_world_kislev
						region = world_old_world_bretonnia
						region = world_old_world_estalia
					}
				}
			}
			# flock behind the Wild Hunt
			modifier = {
				factor = 100
				any_war = {
					using_cb = great_wild_hunt
				}
			}
			modifier = {
				factor = 0
				nor = {
					is_primary_war_attacker = yes
					is_primary_war_defender = yes
				}
			}
			modifier = {
				factor = 0.5
				month = 8
			}
			modifier = {
				factor = 2
				avatar_kurnous = {
					trait = lunatic_3
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = lunatic_3
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = lunatic_2
				}
			}
			modifier = {
				factor = 0.01
				trait = creature_orc
			}
			modifier = {
				factor = 0.01
				trait = creature_goblin
			}
			modifier = {
				factor = 0.25
				trait = creature_dwarf
			}
			modifier = {
				factor = 2.5
				any_war =  {
					attacker = {
						religion_group = chaos_gods_group
					}
				}
			}
			modifier = {
				factor = 2.5
				any_war =  {
					attacker = {
						trait = creature_beastman
					}
				}
			}
			modifier = {
				factor = 1.5
				trait = creature_elf
			}
			modifier = {
				factor = 1.25
				trait = fairy_bred
			}
			modifier = {
				factor = 0.75
				NOT = {
					religion_group = cadai_group
				}
			}
			#faraway wars are less likely to be joined
			modifier = {
				factor = 1.25
				capital_scope = {
					FROM = {
						NOT = {
							distance = {
								where = PREV
								value = 50
							}
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 75
						}
					}
				}
			}
			modifier = {
				factor = 0.25
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 100
						}
					}
				}
			}
			modifier = {
				factor = 0.05
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 300
						}
					}
				}
			}
			modifier = {
				factor = 0.05
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 400
						}
					}
				}
			}
			modifier = {
				factor = 0.01
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 500
						}
					}
				}
			}
		}
	}

	#Dark Elves(druchii)
	prepare_ulthuan_invasion = {
		#Works for Asur as well
		ai_target_filter = all
		only_playable = yes
		from_potential = {
			higher_tier_than = DUKE
			independent = yes
			realm_size = 75		#At the very least...
			age = 16
			nor = {
				has_any_opinion_modifier = preparing_to_invade_elf
				has_truce = ROOT
			}
			OR = {
				religion_group = cadai_group
				religion_group = cytharai_group
			}
		}
		potential = {
			is_within_diplo_range = FROM
			independent = yes
			realm_size = 50		#At the very least...
			nor = {
				character = FROM
				religion_group = FROM
			}
			higher_tier_than = DUKE
			capital_scope = {
				empire = {
					title = e_ulthuan
				}
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 1000
				wealth = 350
				NOT = {
					has_any_opinion_modifier = attempted_ulthuan_invasion
				}
			}
		}
		effect = {
			log = "work decision prepare_ulthuan_invasion for [Root.GetBestName]"
			FROM = {
				prestige = -500
				wealth = -350
				if =  {
					limit = {
						trait = malekith
					}
					k_nagarythe =  {
						add_claim = PREV
					}
				}
				e_ulthuan =  {
					add_claim = PREV
				}
				add_character_modifier = {
					modifier = preparing_ulthuan_invasion
					duration = 720
				}		#gives timer
				set_character_flag = preparing_druchii_invasion			#Prevents AI from starting the war immediately
				opinion = {
					who = ROOT
					modifier = preparing_to_invade_elf
					months = 24
				}
				if = {
					limit = {
						ai = yes
					}
					character_event = {
						id = wh_druchii.7 days = 555
					}
				} #Craven AI needs to attack
				character_event = {
					id = wh_druchii.1
				}	#Umbrella
				character_event = {
					id = wh_druchii.3 days = 720
				}	#Fail event if not at war already
			}
			# Warn target
			character_event = {
				id = wh_druchii.2
				days = 12
				random = 30
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
				FROM = {
					religion_group = cytharai_group
					tier = EMPEROR
					NOT = {
						completely_controls = k_naggarond
						completely_controls = k_clar_karond
						completely_controls = k_ghrond
					} 	#First own your own lands
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = malekith
					has_landed_title = e_naggaroth
					OR = {
						has_landed_title = k_ruathim
						any_vassal = {
							has_landed_title = k_ruathim
						}
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					religion = asrai_cadai
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = craven
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = cruel
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = brave
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = ambitious
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = proud
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = slothful
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = phoenix_king
				}
			}
		}
	}
	vassal_feed_to_nauglir = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		from_potential = {
			is_playable = yes
			age = 14
			religion_group = cytharai_group
		}
		potential = {
			prisoner = yes
			is_playable = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 10
			}
		}
		effect = {
			log = "work decision vassal_feed_to_nauglir for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = wh_druchii.50
					}
				}
			}
			prisoner = no
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			ROOT = {
				character_event = {
					id = wh_druchii.51
				}
			}
			death = {
				death_reason = death_execution
				killer = FROM
			}
			wh_execution_opinion_effect = yes
			hidden_tooltip = {
				any_dynasty_member = {
					limit = {
						religion_group = cytharai_group
					}
					opinion = {
						modifier = opinion_nauglir_family_druchii
						who = FROM
					}
				}
				any_dynasty_member = {
					limit = {
						NOT = {
							religion_group = cytharai_group
						}
					}
					opinion = {
						modifier = opinion_nauglir_family
						who = FROM
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 1.5
				religion = cytharai
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = cruel
				}
			}
		}
	}
	vassal_feed_to_dragon = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		from_potential = {
			is_playable = yes
			age = 14
			OR = {
				has_artifact = black_dragon_mount
				has_artifact = blue_dragon_mount
				has_artifact = chaos_dragon_mount
				has_artifact = gold_dragon_mount
				has_artifact = green_dragon_mount
				has_artifact = red_dragon_mount
				has_artifact = white_dragon_mount
				has_artifact = wyvern_mount
			}
		}
		potential = {
			prisoner = yes
			is_playable = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 10
			}
		}
		effect = {
			log = "work decision vassal_feed_to_dragon for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = wh_druchii.52
					}
				}
			}
			prisoner = no
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			ROOT = {
				character_event = {
					id = wh_druchii.53
				}
			}
			death = {
				death_reason = death_execution
				killer = FROM
			}
			wh_execution_opinion_effect = yes
			hidden_tooltip = {
				any_dynasty_member = {
					limit = {
						religion_group = cytharai_group
					}
					opinion = {
						modifier = opinion_dragon_family_druchii
						who = FROM
					}
				}
				any_dynasty_member = {
					limit = {
						NOT = {
							religion_group = cytharai_group
						}
					}
					opinion = {
						modifier = opinion_dragon_family
						who = FROM
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 1.5
				religion = cytharai
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = cruel
				}
			}
		}
	}
	vassal_feed_to_wyvern = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		from_potential = {
			is_playable = yes
			age = 14
			has_artifact = wyvern_mount
		}
		potential = {
			prisoner = yes
			is_playable = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 10
			}
		}
		effect = {
			log = "work decision vassal_feed_to_wyvern for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = wh_druchii.56
					}
				}
			}
			prisoner = no
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			ROOT = {
				character_event = {
					id = wh_druchii.57
				}
			}
			death = {
				death_reason = death_execution
				killer = FROM
			}
			wh_execution_opinion_effect = yes
			hidden_tooltip = {
				any_dynasty_member = {
					limit = {
						religion_group = cytharai_group
					}
					opinion = {
						modifier = opinion_dragon_family_druchii
						who = FROM
					}
				}
				any_dynasty_member = {
					limit = {
						NOT = {
							religion_group = cytharai_group
						}
					}
					opinion = {
						modifier = opinion_dragon_family
						who = FROM
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 1.5
				religion = cytharai
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = cruel
				}
			}
		}
	}
	vassal_feed_to_gryphon = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		from_potential = {
			is_playable = yes
			age = 14
			has_artifact = gryphon_mount
		}
		potential = {
			prisoner = yes
			is_playable = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 10
			}
		}
		effect = {
			log = "work decision vassal_feed_to_gryphon for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = wh_druchii.54
					}
				}
			}
			prisoner = no
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			ROOT = {
				character_event = {
					id = wh_druchii.55
				}
			}
			death = {
				death_reason = death_execution
				killer = FROM
			}
			wh_execution_opinion_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 1.5
				religion = cytharai
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = cruel
				}
			}
		}
	}

	#Norscan
	make_shieldmaiden = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		from_potential = {
			is_playable = yes
			religion = norscan_gods
		}
		potential = {
			is_female = yes
			FROM = {
				is_liege_of = ROOT
			}
			religion = norscan_gods
			NOT = {
				trait = shieldmaiden
			}
			OR = {
				is_married = no
				is_landed = yes
				any_spouse = {
					OR = {
						NOT = {
							character = FROM
						}
						is_landed = no
					}
				}
			}
		}
		allow = {
			is_adult = yes
			martial = 10
			custom_tooltip = {
				text = make_shieldmaiden_custom_tooltip_1
				hidden_tooltip = {
					OR = {
						trait = brave
						trait = proud
						trait = ambitious
						trait = diligent
						trait = just
					}
				}
			}
			custom_tooltip = {
				text = make_shieldmaiden_custom_tooltip_2
				hidden_tooltip = {
					NOT = {
						trait = shy
						trait = content
						trait = slothful
						trait = envious
						trait = gluttonous
					}
				}
			}
			custom_tooltip = {
				text = make_shieldmaiden_custom_tooltip_3
				hidden_tooltip = {
					NOT = {
						has_character_modifier = recently_relieved_shieldmaiden_timer
					}
				}
			}
		}
		effect = {
			log = "work decision make_shieldmaiden for [Root.GetBestName]"
			custom_tooltip = {
				text = make_shieldmaiden_custom_tooltip_4
			}
			hidden_tooltip = {
				character_event = {
					id = 79020
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.01
			modifier = {
				factor = 1.5
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 0.2
				NOT = {
					reverse_opinion = {
						who = FROM value = 5
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 10
				FROM = {
					OR = {
						trait = ambitious
						trait = just
						is_friend = ROOT
						dynasty = ROOT
					}
				}
			}
		}
	}
	relieve_shieldmaiden = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		from_potential = {
			is_playable = yes
			religion = norscan_gods
		}
		potential = {
			NOT = {
				character = FROM
			}
			trait = shieldmaiden
			FROM = {
				is_liege_of = ROOT
			}
			is_female = yes
			religion = norscan_gods
		}
		allow = {
		}
		effect = {
			log = "work decision relieve_shieldmaiden for [Root.GetBestName]"
			remove_trait = shieldmaiden
			hidden_tooltip = {
				character_event = {
					id = 79023
				}
				add_character_modifier = {
 					modifier = recently_relieved_shieldmaiden_timer
 					days = 365
 					hidden = yes
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.01
			modifier = {
				factor = 10
				FROM = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 10
				NOT = {
					martial = 9
				}
			}
		}
	}

	#Dwarf
	grudge_demand_compensation = {
		ai_target_filter = rivals
		filter = all
		only_rulers = yes
		from_potential = {
			trait = creature_dwarf
			religion_group = dwarf_gods_group
			is_ruler = yes
			nor = {
				has_character_flag = demanding_grudge_compensation
				has_character_modifier = ai_grudge_cooldown
			}
		}
		potential = {
			reverse_has_opinion_modifier = {
				who = FROM
				modifier = opinion_dwarf_grudge
			}
			NOT = {
				character = FROM
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}
		effect = {
			log = "work decision grudge_demand_compensation for [Root.GetBestName]"
			FROM = {
				character_event = {
					id = DR_dwarfs.9
				}
				set_character_flag = demanding_grudge_compensation
				if = {
					limit = {
						ai = yes
					}
					add_character_modifier = {
						name = ai_grudge_cooldown
						duration = 60
						hidden = yes
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 2
				FROM = {
					trait = greedy
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = ambitious
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = proud
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = stubborn
				}
			}
		}
	}

	#Amazon
	give_province_amazon_1 = {
		filter = realm
		ai_target_filter = self
		from_potential = {
			ai = no
			trait = creature_amazon
			is_ruler = yes
			NOR = {
				any_vassal = {
					has_character_modifier = tagged_recipient
				}
				any_courtier = {
					has_character_modifier = tagged_recipient
				}
			}
		}
		potential = {
			trait = creature_amazon
			NOT = {
				character = FROM
			}
			liege = {
				character = FROM
			}
			nor = {
				trait = disinherited_amazon
				trait = disinherited
			}
		}
		allow = {
			FROM = {
				any_demesne_title = {
					can_be_given_away = yes
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}
		effect = {
			log = "work decision give_province_amazon_1 for [Root.GetBestName]"
			add_character_modifier =  {
				name = tagged_recipient
				hidden = yes
				duration = 30
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}
	exile_complacent_amazon = { # Amazon - Exile complacent Amazon

		filter = dynasty
		ai_target_filter = dynasty
		is_high_prio = yes
		only_rulers = yes
		# hide_in_decisions_list = yes # This decision is shown in the Religion View for each complacent character
		from_potential = {
			is_ruler = yes
			religion = amazon
		}
		potential = {
			is_female = yes
			prisoner = no
			dynasty = FROM
			trait = complacent
			NOT = {
				trait = disinherited
			}
			has_regent = no
			OR = {
				is_ruler = no
				liege = {
					character = FROM
				}
			}
		}
		allow = {
			FROM = {
				piety = 100
				NOT = {
					trait = complacent
				}
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}
		effect = {
			log = "work decision exile_complacent_amazon for [Root.GetBestName]"
			character_event = {
				id = slizardmen.44101
			}
			FROM = {
				piety = -100
				decadence = -3
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_dynasty_member = {
					ai = no
					higher_tier_than = ROOT
					same_realm = ROOT
				}
			}
		}
	}

	#Cathay
	ship_shdroi = {
		filter = court
		ai_target_filter = court
		from_potential = {
			prisoner = no
			religion = draconite
			OR = {
				culture = cathayan
				culture = living_jade
			}
		}
		potential = {
			prisoner = yes
			has_nickname = nick_the_imperial_scribe
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				wealth = 100
				OR = {
					custom_tooltip = {
						text = HAS_LINK_WITH_CATHAY
						has_dynasty_flag = link_with_cathay
					}
					top_liege = {
						custom_tooltip = {
							text = HAS_LINK_WITH_CATHAY
							has_dynasty_flag = link_with_cathay
						}
						religion = draconite
					}
				}
			}
		}
		effect = {
			log = "work decision ship_shdroi for [Root.GetBestName]"
			FROM = {
				wealth = -100
				piety = 250
				hidden_tooltip = {
					random_list = {
						70 = {
							character_event = {
								id = svampires.76
							}
						}
						30 = {
							character_event = {
								id = svampires.76001
							}
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
				NOT = {
					culture = cathayan
				}
			}
		}
	}
	cathayan_eunuch = {
		ai_target_filter = court
		from_potential = {
			is_ruler = yes
		}
		potential = {
			prisoner = yes
			is_female = no
			age = 6
			host = {
				character = FROM
			}
			nor = {
				trait = eunuch
				age = 11
				character = FROM
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			prisoner = yes
			NOT = {
				age = 11
			}
		}
		effect = {
			log = "work decision cathayan_eunuch for [Root.GetBestName]"
			prisoner = no
			if = {
				limit = {
					is_demon_trigger = yes
				}
				character_event = {
					id = wh_chaos_demons.1
				}
				break = yes
			}
			add_trait = eunuch
			ROOT = {
				opinion = {
					who = FROM
					modifier = opinion_castrated_me
				}
			}
			hidden_tooltip= {
				mother = {
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
				father = {
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
				any_child = {
					limit = {
						nor = {
							character = FROM
							has_character_flag = evil_murderer
						}
					}
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
				any_spouse = {
					limit = {
						NOT = {
							character = FROM
						}
						opinion = {
							who = ROOT value = -25
						}
					}
					set_character_flag = murder_opinion_set
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
				any_lover = {
					limit = {
						NOT = {
							character = FROM
						}
					}
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
				any_friend = {
					limit = {
						NOT = {
							character = FROM
						}
					}
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
				any_dynasty_member = {
					limit = {
						is_close_relative = ROOT
						NOT = {
							character = FROM
						}
					}
					opinion = {
						who = FROM
						modifier = opinion_castrated_family
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.005 # Less likely to do it
			}
			modifier = {
				factor = 0.1
				FROM = {
					is_close_relative = ROOT
				}
			}
			modifier = {
				factor = 0
				mother = {
					character = FROM
				}
			}
			modifier = {
				factor = 0
				father = {
					character = FROM
				}
			}
			modifier = {
				factor = 0
				OR = {
					FROM = {
						religion = slaanesh
					}
					FROM = {
						religion = cult_of_pleasure
					}
				}
				FROM = {
					wh_is_mage_trigger = yes
				}
			}
			modifier = {
				factor = 0
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0 #Enemy has your relative
				FROM = {
					any_current_enemy = {
						dynasty = ROOT
						is_close_relative = ROOT
						any_courtier = {
							is_close_relative = FROM
							dynasty = FROM
						}
					}
				}
			}
			modifier = {
				factor = 0.001
				FROM = {
					OR = {
						trait = kind
						trait = just
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = cruel
						trait = zealous
					}
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = lunatic_3
				}
			}
			modifier = {
				factor = 0.05
				FROM = {
					trait = patient
				}
			}
		}
	}
	
	#Ormazd/Araby
	vassal_fatwa_decision = {
		only_playable = yes
		filter = vassals				# Only those under me
		ai_target_filter = vassals		# Only those under me
		from_potential = {
			is_playable = yes
			OR = {
				religion = ormazd
				religion = kitabid
			}
			uses_decadence = yes
			any_courtier = {
				has_job_title = job_spiritual
				uses_decadence = yes
			}
		}
		potential = {
			vassal_of = FROM
			is_ruler = yes
			age = 16
			is_landed = yes
			prisoner = no
			OR = {
				religion = ormazd
				religion = kitabid
			}
			uses_decadence = yes
			decadence = 40
			nor = {
				piety = 100
				dynasty = FROM
				has_job_title = job_spiritual
				has_character_modifier = fatwa_timer
			}
		}
		allow = {
			NOT = {
				FROM = {
					decadence = 40
				}
			}
			FROM = {
				piety = 100
			}
		}
		effect = {
			log = "work decision vassal_fatwa_decision for [Root.GetBestName]"
			add_character_modifier = {
				name = fatwa_timer
				duration = 1140
				hidden = yes
			}
			FROM = {
				any_courtier = {
					limit = {
						has_job_title = job_spiritual
					}
					character_event = {
						id = 88750 days = 3 tooltip = "EVTTOOLTIP88750"
					}
				}
			}
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = 88754
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				reverse_opinion = {
					who = FROM value = 40
				}
			}
		}
	}
	embrace_mutazila = {
		only_playable = yes
		filter = self
		ai_target_filter = self
		potential = {
			has_dlc = "Sons of Abraham"
			is_playable = yes
			religion = ormazd
			NOT = {
				OR = {
					trait = mutazilite
					trait = ashari
				}
			}
			is_adult = yes
			prisoner = no
		}
		allow = {
			piety = 50
		}
		effect = {
			log = "work decision embrace_mutazila for [Root.GetBestName]"
			add_trait = mutazilite
			character_event = {
				id = SoA.600 tooltip = EVTTOOLTIP_SoA_600
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = zealous
			}
			modifier = {
				factor = 1.2
				trait = cynical
			}
			modifier = {
				factor = 1.2
				liege = {
					trait = mutazilite
				}
			}
			modifier = {
				factor = 0.005 # Slow it down
			}
		}
	}
	embrace_ashari = {
		only_playable = yes
		filter = self
		ai_target_filter = self
		potential = {
			has_dlc = "Sons of Abraham"
			is_playable = yes
			religion = ormazd
			NOT = {
				OR = {
					trait = mutazilite
					trait = ashari
				}
			}
			is_adult = yes
			prisoner = no
		}
		allow = {
			piety = 50
		}
		effect = {
			log = "work decision embrace_ashari for [Root.GetBestName]"
			add_trait = ashari
			character_event = {
				id = SoA.601 tooltip = EVTTOOLTIP_SoA_601
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.2
				trait = zealous
			}
			modifier = {
				factor = 1.2
				liege = {
					trait = ashari
				}
			}
			modifier = {
				factor = 1.2
				decadence = 40
			}
			modifier = {
				factor = 1.2
				decadence = 60
			}
			modifier = {
				factor = 1.2
				decadence = 80
			}
			modifier = {
				factor = 0.005 # Slow it down
			}
		}
	}
	convince_to_straighten_up = { 	#Ormazd ruler tries to convince a dynasty member to lose the 'Decadent' Trait
		only_playable = yes
		filter = dynasty
		ai_target_filter = dynasty
		#hide_in_decisions_list = yes # This decision is shown in the Religion View for each decadent character
		from_potential = {
			is_playable = yes
			OR = {
				religion = ormazd
				religion = kitabid
			}
			father_even_if_dead = {
				OR = {
					is_alive = no
					is_playable = no
				}
			}
		}
		potential = {
			is_female = no
			prisoner = no
			trait = decadent
			has_regent = no
			lower_tier_than = FROM
		}
		allow = {
			FROM = {
				piety = 100
				prisoner = no
				NOT = {
					trait = decadent
				}
			}
			custom_tooltip = {
				text = "NOT_ALREADY_NEGOTIATED"
				NOT = {
					has_character_flag = negotiated_to_drop_decadence
				}
			}
		}
		effect = {
			log = "work decision convince_to_straighten_up for [Root.GetBestName]"
			set_character_flag = negotiated_to_drop_decadence
			character_event = {
				id = 91350
			}
			FROM = {
				piety = -100
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				any_dynasty_member = {
					ai = no
					higher_tier_than = ROOT
					same_realm = ROOT
				}
			}
		}
	}

	#Chaos Dwarf
	# summon_kdaai = {
		# ai_target_filter = realm
		# filter = realm
		# only_rulers = yes
		# potential = {
			# trait = chaos_dwarf_sorcerer
			# FROM = {
				# custom_tooltip = {
					# text = IS_NOT_INCAPACITATED
					# is_incapacitated_trigger = no
				# }
			# }
		# }
		# allow = {
			# trait = chaos_dwarf_sorcerer
			# custom_tooltip = {
				# text = IS_NOT_INCAPACITATED
				# is_incapacitated_trigger = no
			# }
			# FROM = {
				# check_variable = {
					# which = "hashut_favor"
					# value = 15
				# }
				# wealth = 250
				# piety = 500
			# }
		# }
		# effect = {
			# log = "work decision summon_kdaai for [Root.GetBestName]"
			# FROM = {
				# long_character_event = {
					# id = wh_chaos_dwarf.
				# }
			# }
		# }
	# }
	sacrifice_to_hashut = {
		ai_target_filter = home_court
		filter = home_court
		only_rulers = yes
		from_potential = {
			is_playable = yes
			religion = hashut
			nor = {
				has_character_flag = sacrificing_prisoner_hashut
				has_character_flag = selling_prisoner_slavery
			}
		}
		potential = {
			prisoner = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}
		effect = {
			log = "work decision sacrifice_to_hashut for [Root.GetBestName]"
			FROM = {
				set_character_flag = sacrificing_prisoner_hashut
				long_character_event = {
					id = wh_chaos_dwarf.1
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.04
			}
			modifier = {
				factor = 4
				FROM = {
					trait = creature_dwarf
				}
			}
			modifier = {
				factor = 3
				FROM = {
					trait = impaler
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = zealous
				}
			}
			modifier = {
				factor = 3
				FROM = {
					trait = lunatic_3
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = lunatic_2
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = cruel
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 100
				FROM = {
					has_character_modifier = must_sacrifice_hashut
				}
			}
		}
	}
	chaos_dwarf_sell_into_slavery = {
		ai_target_filter = court
		filter = court
		from_potential = {
			is_ruler = yes
			culture_group = dwarf_chaos_group
			nor = {
				has_character_flag = selling_prisoner_slavery
				has_character_flag = sacrificing_prisoner_hashut
			}
		}
		potential = {
			prisoner = yes
			host = {
				character = FROM
			}
			# NOT = {
				# culture_group = dwarf_chaos_group
			# }
			is_invincible_trigger = no
		}
		allow = {
			prisoner = yes
			
			noR = {
				host = {
					character = ROOT
				}
				liege = { 
					character = FROM 
				}
				FROM = {
					opinion = {
						who = ROOT
						value = 50
					}
				}
			}
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}
		effect = {
			log = "work decision chaos_dwarf_sell_into_slavery for [Root.GetBestName]"
			FROM = {
				set_character_flag = selling_prisoner_slavery
				character_event = {
					id = wh_chaos_dwarf.12
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 3 trait = greedy
			}
			modifier = {
				factor = 0.1 trait = kind
			}
		}
	}
	buy_from_chaos_dwarfs = { #Not actually FOR the Chaos Dwarfs, but for people to buy stuff from them
		ai_target_filter = all
		only_playable = yes
		from_potential = {
			is_ruler = yes
			higher_tier_than = BARON
			nor = {
				culture_group = dwarf_chaos_group
				trait = creature_chaos_dwarf
				religion = stromfels
			}
			OR = {
				religion_group = chaos_gods_group
				religion_group = greenskin_gods_group
				religion_group = old_gods_group
			}
		}
		potential = {
			is_ruler = yes
			higher_tier_than = COUNT
			trait = creature_chaos_dwarf
			religion = hashut
			culture_group = dwarf_chaos_group
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_zharr_naggrund
						has_building = ca_tower_gorgoth
						has_building = ca_black_fortress
						has_building = tp_zharr_naggrund
						has_building = tp_tower_gorgoth
						has_building = tp_black_fortress
						has_building = ca_chaos_dwarf_factory_1
						has_building = ca_chaos_dwarf_factory_2
						has_building = ca_chaos_dwarf_factory_3
						has_building = ca_chaos_dwarf_factory_4
						has_building = ca_chaos_dwarf_slave_levy_1
						has_building = ca_chaos_dwarf_slave_levy_2
						has_building = ca_chaos_dwarf_slave_levy_3
						has_building = ca_chaos_dwarf_slave_levy_4
						has_building = ct_chaos_dwarf_factory_1
						has_building = ct_chaos_dwarf_factory_2
						has_building = ct_chaos_dwarf_factory_3
						has_building = ct_chaos_dwarf_factory_4
						has_building = ct_chaos_dwarf_slave_levy_1
						has_building = ct_chaos_dwarf_slave_levy_2
						has_building = ct_chaos_dwarf_slave_levy_3
						has_building = ct_chaos_dwarf_slave_levy_4
						has_building = tp_chaos_dwarf_factory_1
						has_building = tp_chaos_dwarf_factory_2
						has_building = tp_chaos_dwarf_factory_3
						has_building = tp_chaos_dwarf_factory_4
						has_building = tp_chaos_dwarf_slave_levy_1
						has_building = tp_chaos_dwarf_slave_levy_2
						has_building = tp_chaos_dwarf_slave_levy_3
						has_building = tp_chaos_dwarf_slave_levy_4
					}
				}
				family_palace = {
					OR = {
						has_building = fp_chaos_dwarf_factory_1
						has_building = fp_chaos_dwarf_factory_2
						has_building = fp_chaos_dwarf_factory_3
						has_building = fp_chaos_dwarf_factory_4
						has_building = fp_chaos_dwarf_slave_levy_1
						has_building = fp_chaos_dwarf_slave_levy_2
						has_building = fp_chaos_dwarf_slave_levy_3
						has_building = fp_chaos_dwarf_slave_levy_4
					}
				}
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			nor = {
				has_character_flag = buying_chaos_dwarfs
				has_character_modifier = recently_brought_from_chaos_dwarfs
				ROOT = {
					has_character_modifier = recently_sold_chaos_dwarfs
				}
				FROM = {
					war_with = ROOT
					liege = {
						character = ROOT
					}
				}
			}
			is_within_diplo_range = FROM
			FROM = {
				OR = {
					wealth = 0
					NOT = {
						capital_scope = {
							has_province_modifier = slaves_taken
						}
					}
					NOT = {
						capital_scope = {
							has_province_modifier = province_slave_raid_chaos_dwarf
						}
					}
					check_variable = {
						which = elfslaves value = 1
					}
					check_variable = {
						which = dwarfslaves value = 1
					}
					check_variable = {
						which = humanslaves value = 1
					}
				}
			}
		}
		effect = {
			log = "work decision buy_from_chaos_dwarfs for [Root.GetBestName]"
			FROM = {
				set_character_flag = buying_chaos_dwarfs
				character_event = {
					id = wh_chaos_dwarf.14
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 2
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0
				NOT = {
					wealth = 200
				}
			}
			# Tribes are eager to get their hands on better stuff
			modifier = {
				factor = 2
				FROM = {
					is_tribal = yes
				}
			}
			modifier = {
				factor = 0.25
				trait = greedy
			}
			modifier = {
				factor = 2
				FROM = {
					religion_group = chaos_gods_group
				}
			}
			# modifier = {
			# 	factor = 0.5
			# 	FROM = {
			# 		NOT = {
			# 			empire = {
			# 				title = e_chaos_wastes
			# 			}
			# 		}
			# 	}
			# }
		}
	}
	sell_stuff_chaos_dwarfs = { # Sell your god damn stuff
		ai_target_filter = all
		only_playable = yes
		from_potential = {
			ai = no
			is_ruler = yes
			higher_tier_than = COUNT
			trait = creature_chaos_dwarf
			religion = hashut
			culture_group = dwarf_chaos_group
			OR = {
				capital_holding = {
					OR = {
						has_building = ca_zharr_naggrund
						has_building = ca_tower_gorgoth
						has_building = ca_black_fortress
						has_building = tp_zharr_naggrund
						has_building = tp_tower_gorgoth
						has_building = tp_black_fortress
						has_building = ca_chaos_dwarf_factory_1
						has_building = ca_chaos_dwarf_factory_2
						has_building = ca_chaos_dwarf_factory_3
						has_building = ca_chaos_dwarf_factory_4
						has_building = ca_chaos_dwarf_slave_levy_1
						has_building = ca_chaos_dwarf_slave_levy_2
						has_building = ca_chaos_dwarf_slave_levy_3
						has_building = ca_chaos_dwarf_slave_levy_4
						has_building = ct_chaos_dwarf_factory_1
						has_building = ct_chaos_dwarf_factory_2
						has_building = ct_chaos_dwarf_factory_3
						has_building = ct_chaos_dwarf_factory_4
						has_building = ct_chaos_dwarf_slave_levy_1
						has_building = ct_chaos_dwarf_slave_levy_2
						has_building = ct_chaos_dwarf_slave_levy_3
						has_building = ct_chaos_dwarf_slave_levy_4
						has_building = tp_chaos_dwarf_factory_1
						has_building = tp_chaos_dwarf_factory_2
						has_building = tp_chaos_dwarf_factory_3
						has_building = tp_chaos_dwarf_factory_4
						has_building = tp_chaos_dwarf_slave_levy_1
						has_building = tp_chaos_dwarf_slave_levy_2
						has_building = tp_chaos_dwarf_slave_levy_3
						has_building = tp_chaos_dwarf_slave_levy_4
					}
				}
			}
		}
		potential = {
			is_ruler = yes
			higher_tier_than = BARON
			nor = {
				culture_group = dwarf_chaos_group
				trait = creature_chaos_dwarf
				religion = stromfels
			}
			OR = {
				religion_group = chaos_gods_group
				religion_group = greenskin_gods_group
				religion_group = old_gods_group
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			nor = {
				ROOT = {
					war_with = FROM
					has_character_flag = buying_chaos_dwarfs
					has_character_modifier = recently_brought_from_chaos_dwarfs
					liege = {
						character = FROM
					}
				}
				FROM = {
					has_character_modifier = recently_sold_chaos_dwarfs
				}
			}
			is_within_diplo_range = FROM
			ROOT = {
				OR = {
					wealth = 0
					NOT = {
						capital_scope = {
							has_province_modifier = slaves_taken
						}
					}
					NOT = {
						capital_scope = {
							has_province_modifier = province_slave_raid_chaos_dwarf
						}
					}
					check_variable = {
						which = elfslaves value = 1
					}
					check_variable = {
						which = dwarfslaves value = 1
					}
					check_variable = {
						which = humanslaves value = 1
					}
				}
			}
		}
		effect = {
			log = "work decision sell_stuff_chaos_dwarfs for [Root.GetBestName]"
			FROM = {
				character_event = {
					id = wh_chaos_dwarf.24
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				war = yes
			}
			modifier = {
				factor = 2
				is_tribal = yes
			}
			modifier = {
				factor = 2
				FROM = {
					trait = greedy
				}
			}
			modifier = {
				factor = 2
				religion_group = chaos_gods_group
			}
		}
	}

	#Skaven
	snatch_breeder = {
		# Any female skaven courtier in a Skaven's court is his breeder and he makes babies from her
		ai_target_filter = court
		only_rulers = yes
		from_potential = {
			age = 14
			is_female = no
			trait = creature_skaven
		}
		potential = {
			prisoner = yes
			host = {
				character = FROM
			}
			trait = skaven_breeder
			is_female = yes
			NOT = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
		}
		effect = {
			log = "work decision snatch_breeder for [Root.GetBestName]"
			if = {
				limit = {
					is_ruler = yes
				}
				abdicate = yes
			}
			move_character = FROM
			prisoner = no
			clr_character_flag = captured_in_battle
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
			modifier = {
				factor = 1.2
				prestige = 100
			}
			modifier = {
				factor = 1.2
				prestige = 200
			}
			modifier = {
				factor = 1.2
				prestige = 300
			}
			modifier = {
				factor = 1.2
				prestige = 400
			}
			modifier = {
				factor = 1.2
				prestige = 500
			}
			modifier = {
				factor = 2
				FROM = {
					trait = warlock_engineer
					trait = plaguelord
					trait = master_moulder
					trait = eshin_assassin
					trait = council_warlord
					trait = grey_seer
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = homosexual
					is_female = no
				}
				is_female = yes
			}
			modifier = {
				factor = 0.1
				FROM = {
					OR = {
						trait = kind
						trait = just
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					OR = {
						trait = cruel
						trait = zealous
					}
				}
			}
		}
	}

	#Ogre
	ogre_eat_prisoner = {
		filter = court
		ai_target_filter = court
		only_rulers = yes
		from_potential = {
			is_playable = yes
			age = 16
			trait = creature_ogre
		}
		potential = {
			prisoner = yes
			is_playable = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 10
			}
		}
		effect = {
			log = "work decision ogre_eat_prisoner for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					character_event = {
						id = wh_chaos_beastmen.48
					}
				}
			}
			prisoner = no
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			death = {
				death_reason = death_execution
				killer = FROM
			}
			wh_execution_opinion_effect = yes
			hidden_tooltip = {
				any_dynasty_member = {
					limit = {
						religion_group = cytharai_group
					}
					opinion = {
						modifier = opinion_eaten_family_druchii
						who = FROM
					}
				}
				any_dynasty_member = {
					limit = {
						NOT = {
							religion_group = cytharai_group
						}
					}
					opinion = {
						modifier = opinion_eaten_family
						who = FROM
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = cruel
				}
			}
		}
	}

	#Beastmen
	beastman_eat_prisoner = {
		only_playable = yes
		filter = court
		ai_target_filter = court
		from_potential = {
			age = 16
			trait = creature_beastman
		}
		potential = {
			prisoner = yes
			#is_ruler = yes
			host = {
				character = FROM
			}
		}
		allow = {
			prisoner = yes
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				prestige = 10
			}
		}
		effect = {
			log = "work decision beastman_eat_prisoner for [Root.GetBestName]"
			hidden_tooltip = {
				FROM = {
					piety = 20
					character_event = {
						id = wh_chaos_beastmen.48
					}
				}
			}
			prisoner = no
			if = {
				limit = {
					is_invincible_trigger = yes
				}
				antideath_effect = yes
				break = yes
			}
			death = {
				death_reason = death_execution
				killer = FROM
			}
			wh_execution_opinion_effect = yes
			any_dynasty_member = {
				limit = {
					religion_group = cytharai_group
				}
				opinion = {
					modifier = opinion_eaten_family_druchii
					who = FROM
				}
			}
			any_dynasty_member = {
				limit = {
					NOT = {
						religion_group = cytharai_group
					}
				}
				opinion = {
					modifier = opinion_eaten_family
					who = FROM
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 1.5
				trait = gluttonous
			}
			modifier = {
				factor = 0.75
				prestige = 200
			}
			modifier = {
				factor = 0.05
				prestige = 1000
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = cruel
				}
			}
		}
	}

	#Greenskin
	adopt_greenskin_heir = {
		ai_target_filter = home_court
		filter = sub_realm
		only_rulers = yes
		is_high_prio = yes
		from_potential = {
			is_ruler = yes
			is_female = no
			religion_group = greenskin_gods_group
			OR = {
				culture_group = orc_group
				culture_group = goblin_group
			}
			is_theocracy = no
			NOT = {
				num_of_children = 3
			} #To avoid player taking too many heirs
		}
		potential = {
			is_female = no
			is_tribal = yes
			is_liege_or_above = FROM
			nor = {
				character = FROM
				is_close_relative = FROM
			}
		}
		allow = {
			age = 16
			religion_group = greenskin_gods_group
			OR = {
				AND = {
					FROM = {
						culture_group = orc_group
					}
					culture_group = orc_group
				}
				AND = {
					FROM = {
						culture_group = goblin_group
					}
					culture_group = goblin_group
				}
			}
			custom_tooltip = {
				text = TOOLTIPADOPTGREENSKIN
				hidden_tooltip = {
					dynasty = 0
				}
			}
			NOT = {
				any_spouse = {
					is_close_relative = FROM
				}
			}
			# opinion = { who = FROM value = 0 }
			prisoner = no
			nor = {
				trait = incapable
				trait = blinded
				trait = weak
				trait = imbecile
			}
			OR = {
				AND = {
					FROM = {
						culture_group = orc_group
					}
					martial = 9
				}
				AND = {
					FROM = {
						culture_group = goblin_group
					}
					intrigue = 9
				}
			}
		}
		effect = {
			log = "work decision adopt_greenskin_heir for [Root.GetBestName]"
			hidden_tooltip = {
				father = {
					ROOT = {
						set_real_father = PREV
					}
				}
				set_mother = 0
			}
			set_father = FROM
			dynasty = FROM
			hidden_tooltip = {
				any_child = {
					limit = {
						dynasty = 0
					}
					dynasty = ROOT
					any_child = {
						limit = {
							dynasty = 0
						}
						dynasty = ROOT
						any_child = {
							limit = {
								dynasty = 0
							}
							dynasty = ROOT
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						tier = EMPEROR
					}
				}
				prestige = 200
			}
			if = {
				limit = {
					FROM = {
						tier = KING
					}
				}
				prestige = 100
			}
			if = {
				limit = {
					FROM = {
						tier = DUKE
					}
				}
				prestige = 50
			}
			if = {
				limit = {
					FROM = {
						tier = COUNT
					}
				}
				prestige = 25
			}
			if = {
				limit = {
					FROM = {
						tier = BARON
					}
				}
				prestige = 10
			}
			# opinion = { who = FROM modifier = opinion_adopted_me }
			FROM = {
				recalc_succession = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				FROM = {
					any_child = {
						is_alive = yes
						is_female = no
					}
				}
			}
		}
	}
	declare_waaagh = {
		ai_target_filter = all
		only_playable = yes
		from_potential = {
			is_ruler = yes
			higher_tier_than = DUKE
			independent = yes
			nor = {
				has_any_opinion_modifier = preparing_waaagh_invasion_opinion
				has_character_modifier = attempted_waaagh
			}
			OR = {
				culture_group = orc_group
				culture_group = goblin_group
				religion_group = greenskin_gods_group
			}
			age = 16
		}
		potential = {
			is_within_diplo_range = FROM
			independent = yes
			realm_size = 10
			nor = {
				character = FROM
				trait = creature_orc
				trait = creature_goblin
				religion_group = greenskin_gods_group
			}
			higher_tier_than = DUKE
			any_realm_province = {
				any_neighbor_province = {
					owner = {
						OR = {
							character = FROM
							is_liege_or_above = FROM
						}
					}
				}
			}
		}
		allow = {
			FROM = {
				# primary_title = { #Can't use it if you haven't reached Absolute Greenskin control
				# has_law = greenskin_power_4
				# }
				prestige = 500
			}
		}
		effect = {
			log = "work decision declare_waaagh for [Root.GetBestName]"
			FROM = {
				prestige = -500
				add_character_modifier = {
					modifier = preparing_waaagh_invasion
					duration = 720
				}		#gives timer
				set_character_flag = preparing_waaagh_invasion_flag	 #Prevents AI from starting the war immediately
				opinion = {
					who = ROOT
					modifier = preparing_waaagh_invasion_opinion
					months = 24
				}
				if = {
					limit = {
						ai = yes
					}
					character_event = {
						id = wh_greenskins.180 days = 555
					}
				}
				character_event = {
					id = wh_greenskins.174
				}	#Umbrella
				character_event = {
					id = wh_greenskins.176 days = 720
				}	#Fail event if not at war already
			}
			character_event = {
				id = wh_greenskins.175 days = 12 random = 30
			}		# Warn target
			opinion = {
				who = ROOT
				modifier = preparing_waaagh_invasion_opinion_against_me
				months = 24
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 2
				relative_power = {
					who = FROM
					power = 2
				}
			}
			modifier = {
				factor = 2
				relative_power = {
					who = FROM
					power = 1.5
				}
			}
			modifier = {
				factor = 2
				NOT = {
					relative_power = {
						who = FROM
						power = 0.5
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = craven
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = cruel
				}
			}
			modifier = {
				factor = 1.25
				FROM = {
					trait = brave
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = ambitious
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = proud
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = slothful
				}
			}
		}
	}
	bash_heads = {
		ai_target_filter = sub_realm
		filter = sub_realm
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			has_character_modifier = weak_warboss
			OR = {
				culture_group = orc_group
				culture_group = goblin_group
				religion_group = greenskin_gods_group
			}
		}
		potential = {
			is_within_diplo_range = FROM
			is_female = no
			is_liege_or_above = FROM
			nor = {
				character = FROM
				has_character_flag = duel
			}
			higher_tier_than = BARON
		}
		allow = {
			FROM = {
				NOT = {
					has_character_flag = duel
				}
				has_character_modifier = weak_warboss
				war = no
				prisoner = no
			}
		}
		effect = {
			log = "work decision bash_heads for [Root.GetBestName]"
			custom_tooltip = {
				text = weakwarbossremoved
			}
			save_event_target_as = duelist_a
			set_character_flag = duel
			FROM = {
				set_character_flag = greenksin_bash_head_duel
				save_event_target_as = duelist_b
				set_character_flag = duel
				hidden_tooltip = {
					character_event = {
						id = duelengine.1
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = craven
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = wroth
				}
			}
		}
	}
	bash_runts = { 	#Duel other Greenskin race
		ai_target_filter = realm
		filter = realm
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			OR = {
				culture_group = orc_group
				culture_group = goblin_group
				religion_group = greenskin_gods_group
			}
			NOT = {
				has_character_flag = duel
			}
		}
		potential = {
			is_ruler = yes
			is_within_diplo_range = FROM
			is_female = no
			same_realm = FROM
			nor = {
				character = FROM
				has_character_flag = duel
			}
			higher_tier_than = BARON
			NOT = {
				culture_group = FROM
			}
			OR = {
				culture_group = orc_group
				culture_group = goblin_group
				religion_group = greenskin_gods_group
			}
		}
		allow = {
			FROM = {
				war = no
				prisoner = no
			}
		}
		effect = {
			log = "work decision bash_runts for [Root.GetBestName]"
			save_event_target_as = duelist_a
			set_character_flag = duel
			FROM = {
				save_event_target_as = duelist_b
				set_character_flag = duel
				hidden_tooltip = {
					character_event = {
						id = duelengine.1
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0.4
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 5
				NOT = {
					reverse_opinion = {
						who = FROM value = -25
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = craven
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					trait = wroth
				}
			}
		}
	}

	#Witch Hunter
	denounce_master = {
		#To remove a Master from charge
		filter = realm
		ai_target_filter = realm
		from_potential = {
			trait = witch_hunter
			is_incapacitated_trigger = no
			NOT = {
				has_character_flag = witch_hunter_accusation
			}
			OR = {
				has_landed_title = d_witch_hunter_seat_1
				has_landed_title = d_witch_hunter_seat_2
				has_landed_title = d_witch_hunter_seat_3
				has_landed_title = d_witch_hunter_seat_4
				has_landed_title = d_witch_hunter_seat_5
				has_landed_title = d_witch_hunter_seat_6
				has_landed_title = d_witch_hunter_seat_7
				has_landed_title = d_witch_hunter_seat_8
				has_landed_title = d_witch_hunter_seat_9
				has_landed_title = d_witch_hunter_seat_10
				has_landed_title = d_witch_hunter_seat_11
				has_landed_title = d_witch_hunter_seat_12
				has_landed_title = k_witch_hunters_order
			}
		}
		potential = {
			NOT = {
				has_character_flag = witch_hunter_accusation
			}
			OR = {
				has_landed_title = d_witch_hunter_seat_1
				has_landed_title = d_witch_hunter_seat_2
				has_landed_title = d_witch_hunter_seat_3
				has_landed_title = d_witch_hunter_seat_4
				has_landed_title = d_witch_hunter_seat_5
				has_landed_title = d_witch_hunter_seat_6
				has_landed_title = d_witch_hunter_seat_7
				has_landed_title = d_witch_hunter_seat_8
				has_landed_title = d_witch_hunter_seat_9
				has_landed_title = d_witch_hunter_seat_10
				has_landed_title = d_witch_hunter_seat_11
				has_landed_title = d_witch_hunter_seat_12
				has_landed_title = k_witch_hunters_order
			}
			nor = {
				has_character_modifier = accused_recently
				character = FROM
			}
		}
		allow = {
			FROM = {
				piety = 25
				trait = witch_hunter
			}
		}
		effect = {
			log = "work decision denounce_master for [Root.GetBestName]"
			FROM = {
				piety = -5
			}
			FROM = {
				set_character_flag = witch_hunter_accusation
			}
			set_character_flag = witch_hunter_accusation
			if = {
				limit = {
					trait = incapable
				}
				character_event = {
					id = swhunters.1
				} #Incapable rulers cannot defend themselves
			}
			if = {
				limit = {
					NOT = {
						trait = incapable
					}
				}
				character_event = {
					id = swhunters.2
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05 # Less likely to do it
			}
			modifier = {
				factor = 0
				reverse_opinion = {
					who = FROM value = 75
				}
			}
			modifier = {
				factor = 0.5
				reverse_opinion = {
					who = FROM value = 60
				}
			}
			modifier = {
				factor = 0.75
				reverse_opinion = {
					who = FROM value = 50
				}
			}
			modifier = {
				factor = 0.85
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 0.85
				reverse_opinion = {
					who = FROM value = 30
				}
			}
			modifier = {
				factor = 0.95
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.95
				reverse_opinion = {
					who = FROM value = 10
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					reverse_opinion = {
						who = FROM value = -10
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					reverse_opinion = {
						who = FROM value = -20
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					reverse_opinion = {
						who = FROM value = -30
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					reverse_opinion = {
						who = FROM value = -40
					}
				}
			}
			modifier = {
				factor = 1.25
				NOT = {
					reverse_opinion = {
						who = FROM value = -50
					}
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					reverse_opinion = {
						who = FROM value = -60
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					reverse_opinion = {
						who = FROM value = -75
					}
				}
			}
			modifier = {
				factor = 0
				NOT = {
					FROM = {
						trait = paranoid
					}
				}
				NOR = {
					trait = incapable
					trait = leper
					trait = has_nurgles_rot
					trait = inbred
					trait = blinded
					trait = possessed
					trait = pneumonic
					trait = syphilitic
					trait = has_tuberculosis
					trait = has_typhoid_fever
					trait = has_typhus
					trait = has_bubonic_plague
					trait = has_measles
					trait = has_small_pox
					trait = pregnant
					trait = excommunicated
					trait = lunatic_3
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
					trait = troubled_pregnancy
					trait = hard_pregnancy
					trait = pet_consort
					trait = mage_apprentice
					trait = monstrous
					trait = immortal
					wh_is_mage_trigger = yes
					wh_has_any_magic_potential_reveal_trigger = yes
				}
			}
			modifier = {
				factor = 0.001
				NOR = {
					trait = incapable
					trait = inbred
					trait = possessed
					trait = excommunicated
					trait = lunatic_3
					trait = mutation_minor
					trait = mutation_major
					trait = mutation_massive
					trait = mage_apprentice
					trait = monstrous
					trait = immortal
					wh_is_mage_trigger = yes
					wh_has_any_magic_potential_reveal_trigger = yes
				}
			}
			modifier = {
				factor = 100
				trait = possessed
			}
			modifier = {
				factor = 100
				NOT = {
					trait = witch_hunter
				}
			}
			modifier = {
				factor = 10
				wh_is_mage_trigger = yes
			}
			modifier = {
				factor = 5
				OR = {
					wh_has_any_magic_potential_reveal_trigger = yes
				}
			}
			modifier = {
				factor = 5
				trait = incapable
			}
			modifier = {
				factor = 2
				trait = mutation_minor
			}
			modifier = {
				factor = 1.5
				has_landed_title = k_witch_hunters_order
			}
			modifier = {
				factor = 3
				has_landed_title = k_witch_hunters_order
				FROM = {
					trait = envious
				}
			}
			modifier = {
				factor = 5
				trait = mutation_major
			}
			modifier = {
				factor = 10
				trait = mutation_massive
			}
			modifier = {
				factor = 2
				FROM = {
					trait = paranoid
				}
			}
			modifier = {
				factor = 2
				trait = cynical
				FROM = {
					trait = zealous
				}
			}
			modifier = {
				factor = 1.5
				trait = lunatic_1
			}
			modifier = {
				factor = 1.75
				trait = lunatic_2
			}
			modifier = {
				factor = 2.5
				trait = lunatic_3
			}
			modifier = {
				factor = 1.25
				trait = shy
			}
			modifier = {
				factor = 1.5
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = intricate_webweaver
			}
			modifier = {
				factor = 1.5
				trait = elusive_shadow
			}
			modifier = {
				factor = 0.95
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 0.85
				trait = grey_eminence
			}
			modifier = {
				factor = 1.15
				trait = fortune_builder
			}
			modifier = {
				factor = 1.35
				trait = midas_touched
			}
			modifier = {
				factor = 0.95
				trait = tough_soldier
			}
			modifier = {
				factor = 0.85
				trait = skilled_tactician
			}
			modifier = {
				factor = 0.75
				trait = brilliant_strategist
			}
			modifier = {
				factor = 0.95
				trait = detached_priest
			}
			modifier = {
				factor = 0.85
				trait = martial_cleric
			}
			modifier = {
				factor = 0.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 0.65
				trait = mastermind_theologian
			}
			modifier = {
				factor = 1.25
				trait = stressed
			}
			modifier = {
				factor = 1.5
				trait = infirm
			}
			modifier = {
				factor = 1.5
				trait = drunkard
			}
			modifier = {
				factor = 1.75
				trait = addict
			}
			modifier = {
				factor = 1.5
				trait = pregnant
			}
			modifier = {
				factor = 1.5
				trait = homosexual
			}
			modifier = {
				factor = 1.5
				trait = kinslayer
			}
			modifier = {
				factor = 1.25
				trait = clubfooted
			}
			modifier = {
				factor = 1.25
				trait = harelip
			}
			modifier = {
				factor = 1.75
				trait = hunchback
			}
			modifier = {
				factor = 1.25
				trait = lisp
			}
			modifier = {
				factor = 1.25
				trait = stutter
			}
			modifier = {
				factor = 1.75
				trait = dwarf
			}
			modifier = {
				factor = 2
				trait = inbred
			}
			modifier = {
				factor = 0.75
				trait = celibate
			}
			modifier = {
				factor = 1.5
				trait = hedonist
			}
			modifier = {
				factor = 0.75
				trait = scholar
			}
			modifier = {
				factor = 1.25
				trait = impaler
			}
			modifier = {
				factor = 1.25
				trait = poet
			}
			modifier = {
				factor = 1.25
				trait = lustful
			}
			modifier = {
				factor = 0.95
				trait = chaste
			}
			modifier = {
				factor = 1.25
				trait = gluttonous
			}
			modifier = {
				factor = 0.85
				trait = temperate
			}
			modifier = {
				factor = 1.25
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 1.35
				trait = slothful
			}
			modifier = {
				factor = 0.95
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 1.15
				trait = wroth
			}
			modifier = {
				factor = 0.95
				trait = patient
			}
			modifier = {
				factor = 1.25
				trait = proud
			}
			modifier = {
				factor = 0.95
				trait = humble
			}
			modifier = {
				factor = 1.25
				trait = deceitful
			}
			modifier = {
				factor = 1.25
				trait = craven
			}
			modifier = {
				factor = 1.75
				trait = cynical
			}
			modifier = {
				factor = 0.75
				trait = zealous
			}
			modifier = {
				factor = 1.25
				trait = cruel
			}
		}
	}
	enlist_courtier = {
		filter = court
		ai_target_filter = court
		from_potential = {
			trait = witch_hunter
			is_incapacitated_trigger = no
			NOT = {
				has_character_flag = witch_hunter_accusation
			}
			OR = {
				has_landed_title = d_witch_hunter_seat_1
				has_landed_title = d_witch_hunter_seat_2
				has_landed_title = d_witch_hunter_seat_3
				has_landed_title = d_witch_hunter_seat_4
				has_landed_title = d_witch_hunter_seat_5
				has_landed_title = d_witch_hunter_seat_6
				has_landed_title = d_witch_hunter_seat_7
				has_landed_title = d_witch_hunter_seat_8
				has_landed_title = d_witch_hunter_seat_9
				has_landed_title = d_witch_hunter_seat_10
				has_landed_title = d_witch_hunter_seat_11
				has_landed_title = d_witch_hunter_seat_12
				has_landed_title = k_witch_hunters_order
				AND = {
					is_landed = yes
					higher_tier_than = BARON
				}
			}
		}
		potential = {
			is_ruler = no
			prisoner = no
			religion = sigmarite
			trait = creature_human
			host = {
				character = FROM
			}
			nor = {
				trait = pregnant
				trait = incapable
				trait = maimed
				trait = leper
				trait = ill
				trait = has_nurgles_rot
				trait = blinded
				trait = possessed
				trait = lunatic_3
				trait = mutation_minor
				trait = mutation_major
				trait = mutation_massive
				wh_is_mage_trigger = yes
				wh_has_any_magic_potential_reveal_trigger = yes
				trait = witch_hunter
			}
			age = 14
			NOT = {
				age = 50
			}
		}
		allow = {
			FROM = {
				piety = 25
			}
			piety = 0
		}
		effect = {
			log = "work decision enlist_courtier for [Root.GetBestName]"
			FROM = {
				piety = -5
			}
			hidden_tooltip = {
				remove_trait = celibate
				remove_trait = disinherited
			}
			add_trait = witch_hunter
			culture = witchhunter_culture
			ROOT = {
				any_spouse = {
					remove_spouse = PREV
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0
				age = 40
			}
			modifier = {
				factor = 0.5
				is_female = yes
			}
			modifier = {
				factor = 0.25
				trait = cynical
			}
			modifier = {
				factor = 2.5
				reverse_opinion = {
					who = FROM value = 75
				}
			}
			modifier = {
				factor = 2.25
				reverse_opinion = {
					who = FROM value = 60
				}
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM value = 50
				}
			}
			modifier = {
				factor = 1.95
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 1.75
				reverse_opinion = {
					who = FROM value = 30
				}
			}
			modifier = {
				factor = 1.5
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 1.25
				reverse_opinion = {
					who = FROM value = 10
				}
			}
			modifier = {
				factor = 0.99
				NOT = {
					reverse_opinion = {
						who = FROM value = -10
					}
				}
			}
			modifier = {
				factor = 0.98
				NOT = {
					reverse_opinion = {
						who = FROM value = -20
					}
				}
			}
			modifier = {
				factor = 0.95
				NOT = {
					reverse_opinion = {
						who = FROM value = -30
					}
				}
			}
			modifier = {
				factor = 0.85
				NOT = {
					reverse_opinion = {
						who = FROM value = -40
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					reverse_opinion = {
						who = FROM value = -50
					}
				}
			}
			modifier = {
				factor = 0.65
				NOT = {
					reverse_opinion = {
						who = FROM value = -60
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					reverse_opinion = {
						who = FROM value = -75
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = paranoid
				}
			}
			modifier = {
				factor = 0.75
				trait = lunatic_1
			}
			modifier = {
				factor = 0.25
				trait = lunatic_2
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = intricate_webweaver
			}
			modifier = {
				factor = 1.5
				trait = elusive_shadow
			}
			modifier = {
				factor = 1.5
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 1.75
				trait = grey_eminence
			}
			modifier = {
				factor = 0.75
				trait = fortune_builder
			}
			modifier = {
				factor = 0.85
				trait = midas_touched
			}
			modifier = {
				factor = 1.5
				trait = tough_soldier
			}
			modifier = {
				factor = 1.75
				trait = skilled_tactician
			}
			modifier = {
				factor = 1.95
				trait = brilliant_strategist
			}
			modifier = {
				factor = 1.25
				trait = detached_priest
			}
			modifier = {
				factor = 1.5
				trait = martial_cleric
			}
			modifier = {
				factor = 1.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 1.95
				trait = mastermind_theologian
			}
			modifier = {
				factor = 0.75
				trait = stressed
			}
			modifier = {
				factor = 0.5
				trait = infirm
			}
			modifier = {
				factor = 0.5
				trait = drunkard
			}
			modifier = {
				factor = 0.25
				trait = addict
			}
			modifier = {
				factor = 0.85
				trait = homosexual
			}
			modifier = {
				factor = 0.75
				trait = kinslayer
			}
			modifier = {
				factor = 0.75
				trait = clubfooted
			}
			modifier = {
				factor = 0.5
				trait = harelip
			}
			modifier = {
				factor = 0.5
				trait = hunchback
			}
			modifier = {
				factor = 0.85
				trait = lisp
			}
			modifier = {
				factor = 0.75
				trait = stutter
			}
			modifier = {
				factor = 0.5
				trait = dwarf
			}
			modifier = {
				factor = 0.5
				trait = inbred
			}
			modifier = {
				factor = 1.75
				trait = celibate
			}
			modifier = {
				factor = 0.5
				trait = hedonist
			}
			modifier = {
				factor = 1.75
				trait = scholar
			}
			modifier = {
				factor = 0.95
				trait = impaler
			}
			modifier = {
				factor = 0.85
				trait = poet
			}
			modifier = {
				factor = 0.85
				trait = lustful
			}
			modifier = {
				factor = 1.25
				trait = chaste
			}
			modifier = {
				factor = 0.85
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = temperate
			}
			modifier = {
				factor = 0.85
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 0.95
				trait = wroth
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = proud
			}
			modifier = {
				factor = 1.15
				trait = humble
			}
			modifier = {
				factor = 0.85
				trait = deceitful
			}
			modifier = {
				factor = 1.85
				trait = craven
			}
			modifier = {
				factor = 0.85
				trait = cruel
			}
		}
	}
	exile_whunter = {
		filter = court
		ai_target_filter = court
		from_potential = {
			trait = witch_hunter
			is_incapacitated_trigger = no
			NOT = {
				has_character_flag = witch_hunter_accusation
			}
			OR = {
				has_landed_title = d_witch_hunter_seat_1
				has_landed_title = d_witch_hunter_seat_2
				has_landed_title = d_witch_hunter_seat_3
				has_landed_title = d_witch_hunter_seat_4
				has_landed_title = d_witch_hunter_seat_5
				has_landed_title = d_witch_hunter_seat_6
				has_landed_title = d_witch_hunter_seat_7
				has_landed_title = d_witch_hunter_seat_8
				has_landed_title = d_witch_hunter_seat_9
				has_landed_title = d_witch_hunter_seat_10
				has_landed_title = d_witch_hunter_seat_11
				has_landed_title = d_witch_hunter_seat_12
				has_landed_title = k_witch_hunters_order
				AND = {
					is_landed = yes
					higher_tier_than = BARON
				}
			}
		}
		potential = {
			is_ruler = no
			host = {
				character = FROM
			}
			OR = {
				trait = pregnant
				trait = incapable
				trait = has_nurgles_rot
				trait = possessed
				trait = lunatic_3
				trait = mutation_minor
				trait = mutation_major
				trait = mutation_massive
				wh_is_mage_trigger = yes
				wh_has_any_magic_potential_reveal_trigger = yes
			}
			trait = witch_hunter
			piety = 0
		}
		allow = {
			FROM = {
				piety = 5
			}
		}
		effect = {
			log = "work decision exile_whunter for [Root.GetBestName]"
			FROM = {
				piety = -5
			}
			if = {
				limit = {
					OR = {
						trait = pregnant
						trait = lunatic_3
						trait = incapable
						trait = has_nurgles_rot
					}
				}
				remove_trait = witch_hunter
				location = {
					ROOT = {
						culture = PREV
					}
				}
				banish = yes
			}
			if = {
				limit = {
					NOR = {
						trait = pregnant
						trait = lunatic_3
						trait = incapable
						trait = has_nurgles_rot
					}
				}
				remove_trait = witch_hunter
				if = {
					limit = {
						is_invincible_trigger = yes
					}
					antideath_effect = yes
					break = yes
				}
				add_trait = staked
				death = {
					death_reason = death_execution
					killer = FROM
				}
				hidden_tooltip= {
					mother = {
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					father = {
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_child = {
						limit = {
							nor = {
								trait = witch_hunter
								character = FROM
								has_character_flag = evil_murderer
							}
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_spouse = {
						limit = {
							nor = {
								trait = witch_hunter
								character = FROM
							}
							opinion = {
								who = ROOT value = -25
							}
						}
						set_character_flag = murder_opinion_set
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_lover = {
						limit = {
							nor = {
								trait = witch_hunter
								character = FROM
							}
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_friend = {
						limit = {
							nor = {
								trait = witch_hunter
								character = FROM
							}
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
					any_dynasty_member = {
						limit = {
							NOT = {
								trait = witch_hunter
							}
							is_close_relative = ROOT
							NOT = {
								character = FROM
							}
						}
						opinion = {
							who = FROM
							modifier = evil_murderer
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 10
			modifier = {
				factor = 2
				trait = mutation_minor
			}
			modifier = {
				factor = 5
				trait = mutation_major
			}
			modifier = {
				factor = 10
				trait = mutation_massive
			}
			modifier = {
				factor = 5
				trait = possessed
			}
		}
	}
	request_recruit = {
		filter = all
		ai_target_filter = self
		from_potential = {
			ai = no	#Player only, AI by events
			trait = witch_hunter
			is_incapacitated_trigger = no
			OR = {
				has_landed_title = d_witch_hunter_seat_1
				has_landed_title = d_witch_hunter_seat_2
				has_landed_title = d_witch_hunter_seat_3
				has_landed_title = d_witch_hunter_seat_4
				has_landed_title = d_witch_hunter_seat_5
				has_landed_title = d_witch_hunter_seat_6
				has_landed_title = d_witch_hunter_seat_7
				has_landed_title = d_witch_hunter_seat_8
				has_landed_title = d_witch_hunter_seat_9
				has_landed_title = d_witch_hunter_seat_10
				has_landed_title = d_witch_hunter_seat_11
				has_landed_title = d_witch_hunter_seat_12
				has_landed_title = k_witch_hunters_order
				AND = {
					is_landed = yes
					higher_tier_than = BARON
				}
			}
		}
		potential = {
			is_within_diplo_range = FROM
			NOT = {
				age = 30
			}
			liege = {
				NOT = {
					character = FROM
				}
			}
			liege = {
				NOT = {
					religion_group = chaos_gods_group
				}
			}
			NOT = {
				liege = {
					has_character_modifier = expelled_k_witch_hunters_order
				}
			}
			NOT = {
				liege = {
					has_character_modifier = recent_whunter_request
				}
			}
			is_ruler = no
			nor = {
				trait = pregnant
				trait = incapable
				trait = has_nurgles_rot
				trait = possessed
				trait = lunatic_3
				trait = mutation_minor
				trait = mutation_major
				trait = mutation_massive
				wh_is_mage_trigger = yes
				wh_has_any_magic_potential_reveal_trigger = yes
				trait = witch_hunter
				host = {
					character = FROM
				}
			}
		}
		allow = {
			FROM = {
				piety = 25
			}
			age = 6
			religion = sigmarite
			piety = 0
		}
		effect = {
			log = "work decision request_recruit for [Root.GetBestName]"
			FROM = {
				piety = -5
			}
			liege = {
				add_character_modifier = {
					name = recent_whunter_request
					duration = 3650
					hidden = yes
				}
			}
			hidden_tooltip = {
				character_event = {
					id = swhunters.20
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0
		}
	}
	templars_join_war = { 	#Recreating Holy Order Mechanics
		ai_target_filter = all
		only_rulers = yes
		from_potential = {
			is_ruler = yes
			trait = creature_human
			trait = witch_hunter
			has_landed_title = k_witch_hunters_order
			is_within_diplo_range = ROOT
		}
		potential = {
			is_landed = yes
			independent = yes
			higher_tier_than = BARON
			religion_group = old_world_group
			NOT = {
				character = FROM
			}
		}
		allow = {
			NOT = {
				FROM = {
					war = yes
				}
			}
			NOT = {
				FROM = {
					liege = {
						character = ROOT
					}
				}
			}
			is_within_diplo_range = FROM
			ROOT = {
				war = yes
				any_war = {
					OR = {
						is_primary_war_attacker = yes
						is_primary_war_defender = yes
					}
					OR = {
						any_defender = {
							religion_group = chaos_gods_group
						}
 						any_attacker = {
							religion_group = chaos_gods_group
						}
						any_defender = {
							has_character_modifier = expelled_k_witch_hunters_order
						}
 						any_attacker = {
							has_character_modifier = expelled_k_witch_hunters_order
						}
						any_defender = {
							religion_group = necromantic_group
						}
 						any_attacker = {
							religion_group = necromantic_group
						}
					}
					NOT = {
						OR = {
							any_defender = {
								NOT = {
									character = ROOT
								}
								any_vassal = {
									character = FROM
								}
							}
 							any_attacker = {
								NOT = {
									character = ROOT
								}
								any_vassal = {
									character = FROM
								}
							} #Cannot join a war when your liege is already involved in it
						}
					}
					NOR = {
 						using_cb = peasant_revolt
						using_cb = heretic_revolt
						using_cb = religious_revolt
						using_cb = liberation_revolt	 #Cannot join if the target is tangled in a rebellion
					}
				}
			}
		}
		effect = {
			log = "work decision  using_cb = peasant_revolt for [Root.GetBestName]"
			ROOT = {
				letter_event = {
					id = swhunters.24
				}
			}
			FROM = {
				join_defender_wars = ROOT
				join_attacker_wars = ROOT
				prestige = 50
				piety = 50
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.01
			}
			modifier = {
				factor = 0.1
				lower_tier_than = DUKE
			}
			modifier = {
				factor = 0.001
				NOR = {
					ROOT = {
						capital_scope = {
							region = world_old_world_empire
						}
					}
					ROOT = {
						capital_scope = {
							region = world_old_world_kislev
						}
					}
					ROOT = {
						capital_scope = {
							region = world_old_world_bretonnia
						}
					}
					ROOT = {
						capital_scope = {
							region = world_old_world_estalia
						}
					}
				}
			}
			modifier = {
				factor = 10
				ROOT = {
					any_war = {
						using_cb = religious
					}
				} #flock behind Holy Wars
			}
			modifier = {
				factor = 0
				ROOT = {
					any_war = {
						nor = {
							is_primary_war_attacker = yes
							is_primary_war_defender = yes
						}
					}
				}
			}
			modifier = {
				factor = 0.5
				trait = lunatic_3
			}
			modifier = {
				factor = 0.5
				trait = lunatic_2
			}
			modifier = {
				factor = 0.5
				has_character_modifier = magic_power_1
			}
			modifier = {
				factor = 0.25
				has_character_modifier = magic_power_2
			}
			modifier = {
				factor = 0.05
				has_character_modifier = magic_power_3
			}
			modifier = {
				factor = 0
				has_character_modifier = magic_power_4
			}
			modifier = {
				factor = 2.5
				ROOT = {
					any_war = {
						attacker = {
							religion_group = chaos_gods_group
						}
					}
				}
			}
			modifier = {
				factor = 2.5
				ROOT = {
					any_war = {
						attacker = {
							trait = creature_beastman
						}
					}
				}
			}
			modifier = {
				factor = 0.75
				ROOT = {
					trait = fairy_bred
				}
			}
			modifier = {
				factor = 0.25
				ROOT = {
					NOT = {
						religion = sigmarite
					}
				}
			}
			modifier = {
				factor = 1.25
				capital_scope = {
					FROM = {
						NOT = {
							distance = {
								where = PREV
								value = 50 }
						}
					}
				} #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.5
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 75
						}
					}
				} #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.25
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 100
						}
					}
				} #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.05
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 300
						}
					}
				} #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.05
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 400
						}
					}
				} #faraway wars are less likely to be joined
			}
			modifier = {
				factor = 0.01
				capital_scope = {
					FROM = {
						distance = {
							where = PREV
							value = 500
						}
					}
				} #faraway wars are less likely to be joined
			}
		}
	}
	create_whunter_company = {
		filter = home_court
		ai_target_filter = home_court
		only_rulers = yes
		from_potential = {
			has_dlc = "Horse Lords"
			is_ruler = yes
			has_landed_title = k_witch_hunters_order
			trait = creature_human
			trait = witch_hunter
		}
		potential = {
			is_ruler = no
			mercenary = no
			age = 16
			trait = creature_human
			trait = witch_hunter
			NOT = {
				character = FROM
			}
		}
		allow = {
			is_adult = yes
			is_ruler = no
			liege = {
				character = FROM
			}
			FROM = {
				piety = 150
				wealth = 450
			}
		}
		effect = {
			log = "work decision create_whunter_company for [Root.GetBestName]"
			# set_character_flag = is_mercenary_leader
			add_character_modifier = {
				modifier = started_mercenary_company months = 30
				hidden = yes
			}
			FROM = {
				wealth = -450
				primary_title = {
					ROOT = {
						remove_trait = witch_hunter
						set_government_type = nomadic_government
						manpower = 1000
						create_title = {
							tier = DUKE
							name = DYNAMIC_WITCHHUNTER_CHAPTER
							landless = yes
							custom_created = yes
							culture = ROOT
							holder = ROOT
							base_title = THIS
							mercenary = yes
							ruler = "HUNTER_CAPTAIN"
							ruler_female = "HUNTER_CAPTAIN"
							foa = "CAPTAIN_FOA"
						}
						new_title = {
							set_coa = FROM
						}
					}
					ROOT = {
						add_trait = witch_hunter
						set_government_type = congregation_government
					}
				}
			}
			ROOT = {
				set_defacto_liege = FROM
				piety = 75
				wealth = 50
				prestige = 50
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 0
				OR = {
					any_mercenary_band = {
						count = 3
						band_creator = {
							character = FROM
						}
					}
					FROM = {
						is_primary_war_attacker = yes
						is_primary_war_defender = yes
					}
				}
			}
			modifier = {
				factor = 0.5
				any_mercenary_band = {
					count = 1
					band_creator = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0.5
				any_mercenary_band = {
					count = 2
					band_creator = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0
				age = 40
			}
			modifier = {
				factor = 0.5
				is_female = yes
			}
			modifier = {
				factor = 0.25
				trait = cynical
			}
			modifier = {
				factor = 2.5
				reverse_opinion = {
					who = FROM value = 75
				}
			}
			modifier = {
				factor = 2.25
				reverse_opinion = {
					who = FROM value = 60
				}
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM value = 50
				}
			}
			modifier = {
				factor = 1.95
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 1.75
				reverse_opinion = {
					who = FROM value = 30
				}
			}
			modifier = {
				factor = 1.5
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 1.25
				reverse_opinion = {
					who = FROM value = 10
				}
			}
			modifier = {
				factor = 0.99
				NOT = {
					reverse_opinion = {
						who = FROM value = -10
					}
				}
			}
			modifier = {
				factor = 0.98
				NOT = {
					reverse_opinion = {
						who = FROM value = -20
					}
				}
			}
			modifier = {
				factor = 0.95
				NOT = {
					reverse_opinion = {
						who = FROM value = -30
					}
				}
			}
			modifier = {
				factor = 0.85
				NOT = {
					reverse_opinion = {
						who = FROM value = -40
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					reverse_opinion = {
						who = FROM value = -50
					}
				}
			}
			modifier = {
				factor = 0.65
				NOT = {
					reverse_opinion = {
						who = FROM value = -60
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					reverse_opinion = {
						who = FROM value = -75
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = paranoid
				}
			}
			modifier = {
				factor = 0.75
				trait = lunatic_1
			}
			modifier = {
				factor = 0.25
				trait = lunatic_2
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 2
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = intricate_webweaver
			}
			modifier = {
				factor = 1.5
				trait = elusive_shadow
			}
			modifier = {
				factor = 1.5
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 1.75
				trait = grey_eminence
			}
			modifier = {
				factor = 0.75
				trait = fortune_builder
			}
			modifier = {
				factor = 0.85
				trait = midas_touched
			}
			modifier = {
				factor = 1.5
				trait = tough_soldier
			}
			modifier = {
				factor = 1.75
				trait = skilled_tactician
			}
			modifier = {
				factor = 1.95
				trait = brilliant_strategist
			}
			modifier = {
				factor = 1.25
				trait = detached_priest
			}
			modifier = {
				factor = 1.5
				trait = martial_cleric
			}
			modifier = {
				factor = 1.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 1.95
				trait = mastermind_theologian
			}
			modifier = {
				factor = 0.75
				trait = stressed
			}
			modifier = {
				factor = 0.5
				trait = infirm
			}
			modifier = {
				factor = 0.5
				trait = drunkard
			}
			modifier = {
				factor = 0.25
				trait = addict
			}
			modifier = {
				factor = 0.85
				trait = homosexual
			}
			modifier = {
				factor = 0.75
				trait = kinslayer
			}
			modifier = {
				factor = 0.75
				trait = clubfooted
			}
			modifier = {
				factor = 0.5
				trait = harelip
			}
			modifier = {
				factor = 0.5
				trait = hunchback
			}
			modifier = {
				factor = 0.85
				trait = lisp
			}
			modifier = {
				factor = 0.75
				trait = stutter
			}
			modifier = {
				factor = 0.5
				trait = dwarf
			}
			modifier = {
				factor = 0.5
				trait = inbred
			}
			modifier = {
				factor = 1.75
				trait = celibate
			}
			modifier = {
				factor = 0.5
				trait = hedonist
			}
			modifier = {
				factor = 1.75
				trait = scholar
			}
			modifier = {
				factor = 0.95
				trait = impaler
			}
			modifier = {
				factor = 0.85
				trait = poet
			}
			modifier = {
				factor = 0.85
				trait = lustful
			}
			modifier = {
				factor = 1.25
				trait = chaste
			}
			modifier = {
				factor = 0.85
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = temperate
			}
			modifier = {
				factor = 0.85
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 0.95
				trait = wroth
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = proud
			}
			modifier = {
				factor = 1.15
				trait = humble
			}
			modifier = {
				factor = 0.85
				trait = deceitful
			}
			modifier = {
				factor = 1.85
				trait = craven
			}
			modifier = {
				factor = 0.85
				trait = cruel
			}
		}
	}
	dissolve_whunter_company = {
		filter = vassals
		ai_target_filter = vassals
		only_rulers = yes
		from_potential = {
			has_dlc = "Horse Lords"
			is_ruler = yes
			has_landed_title = k_witch_hunters_order
			trait = creature_human
			trait = witch_hunter
		}
		potential = {
			mercenary = yes
			trait = creature_human
			trait = witch_hunter
			liege = {
				character = FROM
			}
			primary_title = {
				band_creator = {
					character = FROM
				}
			}
		}
		allow = {
			OR = {
				custom_tooltip = {
					text = is_mercenary_leader_YEAR
					had_character_flag = {
						flag = is_mercenary_leader days = 1825
					}
				}
				prisoner = yes
			}
			primary_title = {
				NOT = {
					has_raised_standing_troops = yes
				}
				band_creator = {
					character = FROM
				}
			}
		}
		effect = {
			log = "work decision dissolve_whunter_company for [Root.GetBestName]"
			primary_title = {
				activate_title = {
					title = THIS status = no
				}
				destroy_landed_title = THIS
			}
			move_character = FROM
			clr_character_flag = is_mercenary_leader
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.01
			}
			modifier = {
				factor = 0
				piety = 250
			}
			modifier = {
				factor = 0.5
				health = 7
			}
			modifier = {
				factor = 1.5
				NOT = {
					health = 5
				}
			}
			modifier = {
				factor = 2
				NOT = {
					health = 4
				}
			}
			modifier = {
				factor = 4
				NOT = {
					health = 3
				}
			}
			modifier = {
				factor = 10
				NOT = {
					trait = witch_hunter
				}
			}
			modifier = {
				factor = 5
				trait = incapable
			}
			modifier = {
				factor = 1.75
				trait = lunatic_3
			}
			modifier = {
				factor = 1.5
				trait = lunatic_2
			}
			modifier = {
				factor = 1.5
				has_character_modifier = magic_power_1
			}
			modifier = {
				factor = 2
				has_character_modifier = magic_power_2
			}
			modifier = {
				factor = 4
				has_character_modifier = magic_power_3
			}
			modifier = {
				factor = 10
				has_character_modifier = magic_power_4
			}
			modifier = {
				factor = 3
				trait = mutation_minor
			}
			modifier = {
				factor = 5
				trait = mutation_major
			}
			modifier = {
				factor = 10
				trait = mutation_massive
			}
		}
	}

	#VAMPIRE
	send_a_seductress = {
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = lahmian_queen
			any_dynasty_member ={
				is_female = yes
				is_landed = no
				trait = vampire_lahmian_visible
				NOT = {
					trait = on_lahmian_mission
				}
			}
		}
		potential = {
			is_playable = yes
			is_female = no
			is_within_diplo_range = FROM
			age = 16
			nor = {
				has_character_flag = lahmian_target
				is_lover = FROM
			}
			trait = creature_human
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
		}
		allow = {
			FROM = {
				wealth = 25
			}
		}
		effect = {
			log = "work decision send_a_seductress for [Root.GetBestName]"
			character_event = {
				id = lahmia.7
			}
			#set_character_flag = temp_lahmian_target
			#FROM = { character_event = { id = lahmia.5  } }
		}
		ai_will_do = {
			factor = 0
		}
	}
	seduce_target_personally = {
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = lahmian_queen
			trait = vampire_lahmian_visible
			NOT = {
				trait = on_lahmian_mission
			}
		}
		potential = {
			is_playable = yes
			is_female = no
			is_within_diplo_range = FROM
			age = 16
			nor = {
				has_character_flag = lahmian_target
				is_lover = FROM
			}
			trait = creature_human
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
		}
		allow = {
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				wealth = 25
			}
		}
		effect = {
			log = "work decision seduce_target_personally for [Root.GetBestName]"
			character_event = {
				id = lahmia.105
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	recall_from_mission = {
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = lahmian_queen
			trait = vampire_lahmian_visible
		}
		potential = {
			trait = vampire_lahmian_visible
			trait = on_lahmian_mission
			NOT = {
				has_character_flag = recruitment_mission
			}
		}
		allow = {
		}
		effect = {
			log = "work decision recall_from_mission for [Root.GetBestName]"
			set_character_flag = return_home_lahmia
		}
		ai_will_do = {
			factor = 0
		}
	}
	recall_from_recruitment_mission = {
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = lahmian_queen
			trait = vampire_lahmian_visible
		}
		potential = {
			trait = vampire_lahmian_visible
			trait = on_lahmian_mission
			has_character_flag = recruitment_mission
		}
		allow = {
		}
		effect = {
			log = "work decision recall_from_recruitment_mission for [Root.GetBestName]"
			clr_character_flag = recruitment_mission
			remove_trait = on_lahmian_mission
		}
		ai_will_do = {
			factor = 0
		}
	}
	bring_lover_home = {
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = vampire_lahmian_visible
		}
		potential = {
			is_lover = FROM
			is_landed = no
			nor = {
				same_realm = FROM
				religion_group = chaos_gods_group
			}
			trait = creature_human
		}
		allow = {
		}
		effect = {
			log = "work decision bring_lover_home for [Root.GetBestName]"
			character_event = {
				id = lahmia.200
			}
		}
		ai_will_do = {
			factor = 0
		}
	}
	send_on_recruitment_mission = {
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = vampire_lahmian_visible
			trait = lahmian_queen
			any_dynasty_member ={
				trait = vampire_lahmian_visible
				NOT = {
					trait = on_lahmian_mission
				}
			}
		}
		potential = {
			dynasty = FROM
			trait = vampire_lahmian_visible
			NOT = {
				trait = on_lahmian_mission
			}
		}
		allow = {
			FROM = {
				wealth = 10
			}
		}
		effect = {
			log = "work decision send_on_recruitment_mission for [Root.GetBestName]"
			FROM = {
				wealth = -10
			}
			add_trait = on_lahmian_mission
			set_character_flag = recruitment_mission
		}
		ai_will_do = {
			factor = 0
		}
	}
	establish_lahmian_presence = {
		only_playable = yes
		ai_target_filter = spouse ##only players use this mechanic, since filter all is too CPU intensive. AI will use other mechanics
		from_potential = {
			ai = no
			trait = vampire_lahmian_visible
			trait = lahmian_queen
		}
		potential = {
			is_within_diplo_range = FROM
			religion_group = old_world_group
			trait = creature_human
			location = {
				NOT = {
					has_province_modifier = lahmian_presence
				}
			}
		}
		allow = {
			FROM = {
				wealth = 100
			}
		}
		effect = {
			log = "work decision establish_lahmian_presence for [Root.GetBestName]"
			FROM = {
				wealth = -100
			}
			character_event = {
				id = lahmia.300
			}
		}
		ai_will_do = {
			factor = 0
		}
	}

	turn_courtier_into_vampire = {
		only_playable = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			is_visible_vampire_trigger = yes
		}
		potential = {
			is_living_human_trigger = yes
			OR = {
				host = {
					character = FROM
				}
				guardian = {
					character = FROM
				}
				any_spouse = {
					character = FROM
				}
				any_lover = {
					character = FROM
				}
				any_friend = {
					character = FROM
				}
			}
			NOT = {
				character = FROM
			}
		}
		allow = {
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				OR = {
					NOT = {
						trait = vampire_necrarch_visible
					}
					AND = {
						ROOT = {
							trait = mage_apprentice
						}	#Either you turn your own apprentice, or you turn your new vampire into your apprentice
						any_friend = {
							character = ROOT
						}
					}
					# strange place
					AND = {
						ROOT = {
							wh_is_mage_trigger = no
							not = {
								trait = mage_apprentice
							}
						}
						any_friend = {
							nor = {
								character = ROOT
								trait = mage_apprentice
							}
						}
					}
				}
			}
			OR = {
				AND = {
					FROM = {
						OR = {
							trait = vampire_lahmian_visible
							trait = vampire_carstein_visible
							trait = vampire_jade_visible
							trait = vampire_mahtmasi_visible
						}
					}
					age = 12
				}
				age = 16		#Blood Dragons, Necrarchs and Strigoi are more restrictive in their picking
			}
		}
		effect = {
			log = "work decision turn_courtier_into_vampire for [Root.GetBestName]"
			if = {
				limit = {
					NOT = {
						trait = mage_apprentice
					}
					FROM = {
						trait = vampire_necrarch_visible
					}
				}
				set_character_flag = taken_necromancer_decision
				character_event = {
					id = sorcererapprentice.17
					days = 1
				}
			}
			if = {
				limit = {
					FROM = {
						trait = vampire_jade_visible
						religion = draconite
					}
				}
				FROM = {
					piety = -500
					random = {
						chance = 10
						character_event = {
							id = svampires.77
						}
					}
				}
			}
			if = {
				limit = {
					FROM = {
						trait = vampire_carstein_visible
					}
					dynasty = 0
				}
				FROM = {
					prestige = -350
				}
			}
			if = {
				limit = {
					age = 16
				}
				character_event = {
					id = vampire.0
				}
			}
			if = {
				limit = {
					NOT = {
						age = 16
					}
				}
				character_event = {
					id = svampires.8
				}
			}
			if = {
				limit = {
					FROM = {
						OR = {
							trait = vampire_strigoi_visible
							trait = vampire_strigoi_hidden
						}
					}
				}
				hidden_tooltip = {
					FROM = {
						character_event = {
							id = mutation.1005
						}
					}
				}
			} #lunacy counter
			#Blood Dragons are shamed if you turn a weak person
			if = {
				limit = {
					FROM = {
						trait = vampire_blood_visible
					}
					OR = {
						trait = weak
						trait = fragile
						trait = soft
						trait = maimed
						trait = incapable
						trait = blinded
						trait = eunuch
						trait = undernourished
						trait = fat
						trait = addict
						NOT = {
							martial = 10
						}
					}
				}
				FROM = {
					prestige = -450
				}
			}
			#Strigoi are against turning newbies althogeter
			if = {
				limit = {
					NOT = {
						has_global_flag = strygos_reformed
					}
					FROM = {
						trait = vampire_strigoi_visible
					}
				}
				FROM = {
					piety = -750
				}
			}
			#Neferata hates men
			if = {
				limit = {
					FROM = {
						trait = vampire_lahmian_visible
					}
					is_female = no
				}
				FROM = {
					piety = -500
					prestige = -500
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
			}
			modifier = {
				factor = 0.01
				nor = {
					diplomacy = 15
					martial = 15
					stewardship = 15
					intrigue = 15
					learning = 15
				}
				FROM = {
					NOT = {
						trait = vampire_jade_visible
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = just
				}
			}
			modifier = {
				factor = 20
				trait = mage_apprentice
				any_friend = {
					character = FROM
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = vampire_blood_visible
				}
				OR = {
					trait = weak
					trait = fragile
					trait = soft
					trait = maimed
					trait = incapable
					trait = blinded
					trait = eunuch
					trait = undernourished
					trait = fat
					trait = addict
					nor = {
						martial = 10
						age = 16
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = vampire_jade_visible
					religion_group = necromantic_group
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = vampire_jade_visible
					religion = draconite
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					NOT = {
						trait = vampire_carstein_visible
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = vampire_strigoi_visible
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					nor = {
						trait = vampire_carstein_visible
						trait = vampire_lahmian_visible
					}
				}
			}
			modifier = {
				factor = 0
				is_female = no
				FROM = {
					trait = vampire_lahmian_visible
				}
			}
			modifier = {
				factor = 0.5
				nor = {
					age = 16
					from = {
						trait = vampire_carstein_visible
						trait = vampire_lahmian_visible
					}
				}
			}
			modifier = {
				factor = 0
				nor = {
					any_friend = {
						character = FROM
					}
					any_lover = {
						character = FROM
					}
					any_child = {
						character = FROM
					}
					opinion = {
						who = ROOT
						value = 25
					}
				}
				FROM = {
					trait = vampire_mahtmasi_visible
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					trait = envious
				}
			}
			modifier = {
				factor = 2.5
				NOT = {
					FROM = {
						num_of_children = 1
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					num_of_children = 3
				}
			}
			modifier = {
				factor = 0
				FROM = {
					num_of_children = 8
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.25
				FROM = {
					higher_tier_than = ROOT
				}
			}
			modifier = {
				factor = 2
				higher_tier_than = COUNT
			}
			modifier = {
				factor = 2
				higher_tier_than = DUKE
			}
			modifier = {
				factor = 3
				FROM = {
					any_lover = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					any_spouse = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0.1
				NOT = {
					age = 16
				}
				FROM = {
					nor = {
						trait = lunatic_1
						trait = lunatic_2
						trait = lunatic_3
					}
				}
				mother = {
					NOT = {
						character = FROM
					}
				}
				father = {
					NOT = {
						character = FROM
					}
				}
			}
		}
	}
	makeavampireheir = {
		only_rulers = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			is_visible_vampire_trigger = yes
		}
		potential = {
			is_vampire_trigger = yes
			nor = {
				higher_tier_than = FROM
				character = FROM
				dynasty = FROM
			}
			OR = {
				host = {
					character = FROM
				}
				any_spouse = {
					character = FROM
				}
				father = {
					character = FROM
				}
				mother = {
					character = FROM
				}
				any_lover = {
					character = FROM
				}
			}
		}
		allow = {
			is_vampire_trigger = yes
			has_opinion_modifier = {
				modifier = opinion_sired_me
				who = FROM
			}
			FROM = {
				NOT = {
					has_opinion_modifier = {
						modifier = opinion_v_rejected_adoption
						who = ROOT
					}
				}
			}
		}
		effect = {
			log = "work decision makeavampireheir for [Root.GetBestName]"
			character_event = {
				id = vampire.15
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
			}
			modifier = {
				factor = 0.01
				nor = {
					diplomacy = 15
					martial = 15
					stewardship = 15
					intrigue = 15
					learning = 15
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = paranoid
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = just
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 0
				FROM = {
					trait = envious
				}
			}
			modifier = {
				factor = 2.5
				NOT = {
					FROM = {
						num_of_children = 1
					}
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					num_of_children = 3
				}
			}
			modifier = {
				factor = 0
				FROM = {
					num_of_children = 8
				}
			}
			modifier = {
				factor = 0.01
				FROM = {
					war = yes
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
				higher_tier_than = COUNT
			}
			modifier = {
				factor = 0.25
				FROM = {
					NOT = {
						religion = ROOT
					}
				}
				higher_tier_than = DUKE
			}
			modifier = {
				factor = 3
				FROM = {
					any_lover = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					any_spouse = {
						character = ROOT
					}
				}
			}
		}
	}
	askvampliegedynasty = {
		is_high_prio = yes
		filter = realm
		ai_target_filter = realm
		from_potential = {
			is_visible_vampire_trigger = yes
			#	has_opinion_modifier = { modifier = opinion_sired_me
			#				who = ROOT }
		}
		potential = {
			is_visible_vampire_trigger = yes
			nor = {
				dynasty = FROM
				character = FROM
			}
			higher_tier_than = FROM
		}
		allow = {
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			is_visible_vampire_trigger = yes
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				NOT = {
					has_opinion_modifier = {
						modifier = opinion_v_rejected_adoption
						who = ROOT
					}
				}
				has_opinion_modifier = {
					modifier = opinion_sired_me
					who = ROOT
				}
			}
		}
		effect = {
			log = "work decision askvampliegedynasty for [Root.GetBestName]"
			character_event = {
				id = vampire.15002
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.05
			}
			modifier = {
				factor = 0.15
				FROM = {
					nor = {
						diplomacy = 15
						martial = 15
						stewardship = 15
						intrigue = 15
						learning = 15
						trait = proud
					}
				}
			}
			modifier = {
				factor = 0.85
				FROM = {
					trait = dim
				}
			}
			modifier = {
				factor = 0.75
				FROM = {
					trait = dumb
				}
			}
			modifier = {
				factor = 0.65
				FROM = {
					trait = slow
				}
			}
			modifier = {
				factor = 0.5
				FROM = {
					trait = idiot
				}
			}
			modifier = {
				factor = 0.45
				FROM = {
					trait = imbecile
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					trait = envious
				}
			}
			modifier = {
				factor = 0.01
				FROM = {
					trait = shy
				}
			}
			modifier = {
				factor = 0.01
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					trait = gregarious
				}
			}
			modifier = {
				factor = 2.5
				FROM = {
					trait = ambitious
				}
			}
			modifier = {
				factor = 0.01
				FROM = {
					trait = content
				}
			}
			modifier = {
				factor = 2.5
				FROM = {
					is_ruler = no
				}
			}
			modifier = {
				factor = 1.75
				FROM = {
					NOT = {
						prestige = 750
					}
				}
			}
			modifier = {
				factor = 3
				any_lover = {
					character = FROM
				}
			}
			modifier = {
				factor = 2
				any_spouse = {
					character = FROM
				}
			}
		}
	}

	create_blooddragon_company = {
		filter = home_court
		ai_target_filter = home_court
		only_playable = yes
		from_potential = {
			has_dlc = "Horse Lords"
			is_ruler = yes
			trait = vampire_blood_visible
		}
		potential = {
			is_ruler = no
			mercenary = no
			age = 16
			trait = vampire_blood_visible
			culture = blooddragons_culture
			NOT = {
				character = FROM
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
			is_adult = yes
			is_ruler = no
			martial = 10
			nor = {
				trait = infirm
				trait = maimed
				trait = blinded
				trait = eunuch
				trait = weak
				trait = fragile
			}
			liege = {
				character = FROM
			}
			FROM = {
				piety = 150
				wealth = 450
			}
		}
		effect = {
			log = "work decision create_blooddragon_company for [Root.GetBestName]"
			# set_character_flag = is_mercenary_leader
			add_character_modifier = {
				modifier = started_mercenary_company months = 20
				hidden = yes
			}
 			hidden_tooltip = {
				FROM = {
					wealth = -450
					primary_title = {
						ROOT = {
							remove_trait = vampire_blood_visible
							set_government_type = nomadic_government
							manpower = 1000
							create_title = {
								tier = DUKE
								name = DYNAMIC_BLOODDRAGON_COMPANY
								landless = yes
								custom_created = yes
								culture = ROOT
								holder = ROOT
								base_title = THIS
								adventurer = yes
								mercenary = yes
								ruler = "BLOOD_CAPTAIN"
								ruler_female = "BLOOD_CAPTAIN"
								foa = "CAPTAIN_FOA"
							}
							new_title = {
								set_coa = FROM
							}
						}
						ROOT = {
							add_trait = vampire_blood_visible
							set_government_type = vampiric_government
						}
					}
				}
			}
			FROM = {
				make_tributary = {
					who = ROOT
					percentage = 0.6
				}
			}
			piety = 75
			wealth = 50
			prestige = 50
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 0
				OR = {
					any_mercenary_band = {
						count = 3
						band_creator = {
							character = FROM
						}
					}
					FROM = {
						is_primary_war_attacker = yes
						is_primary_war_defender = yes
					}
				}
			}
			modifier = {
				factor = 0.5
				any_mercenary_band = {
					count = 1
					band_creator = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0.5
				any_mercenary_band = {
					count = 2
					band_creator = {
						character = FROM
					}
				}
			}
			modifier = {
				factor = 0
				NOT =	{
					age = 40
				}
			}
			modifier = {
				factor = 0.5
				is_female = yes
			}
			modifier = {
				factor = 0.25
				trait = kind
			}
			modifier = {
				factor = 2.5
				reverse_opinion = {
					who = FROM value = 75
				}
			}
			modifier = {
				factor = 2.25
				reverse_opinion = {
					who = FROM value = 60
				}
			}
			modifier = {
				factor = 2
				reverse_opinion = {
					who = FROM value = 50
				}
			}
			modifier = {
				factor = 1.95
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 1.75
				reverse_opinion = {
					who = FROM value = 30
				}
			}
			modifier = {
				factor = 1.5
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 1.25
				reverse_opinion = {
					who = FROM value = 10
				}
			}
			modifier = {
				factor = 0.99
				NOT = {
					reverse_opinion = {
						who = FROM value = -10
					}
				}
			}
			modifier = {
				factor = 0.98
				NOT = {
					reverse_opinion = {
						who = FROM value = -20
					}
				}
			}
			modifier = {
				factor = 0.95
				NOT = {
					reverse_opinion = {
						who = FROM value = -30
					}
				}
			}
			modifier = {
				factor = 0.85
				NOT = {
					reverse_opinion = {
						who = FROM value = -40
					}
				}
			}
			modifier = {
				factor = 0.75
				NOT = {
					reverse_opinion = {
						who = FROM value = -50
					}
				}
			}
			modifier = {
				factor = 0.65
				NOT = {
					reverse_opinion = {
						who = FROM value = -60
					}
				}
			}
			modifier = {
				factor = 0.5
				NOT = {
					reverse_opinion = {
						who = FROM value = -75
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = paranoid
				}
			}
			modifier = {
				factor = 1.25
				trait = lunatic_1
			}
			modifier = {
				factor = 1.5		#Vampires appreciate quirks
				trait = lunatic_2
			}
			modifier = {
				factor = 1.75		#Vampires appreciate quirks
				trait = lunatic_3
			}
			modifier = {
				factor = 0.75
				trait = shy
			}
			modifier = {
				factor = 0.8
				trait = paranoid
			}
			modifier = {
				factor = 0.5
				trait = mystic
			}
			modifier = {
				factor = 0.85
				trait = intricate_webweaver
			}
			modifier = {
				factor = 0.75
				trait = elusive_shadow
			}
			modifier = {
				factor = 0.65
				trait = charismatic_negotiator
			}
			modifier = {
				factor = 0.5
				trait = grey_eminence
			}
			modifier = {
				factor = 0.75
				trait = fortune_builder
			}
			modifier = {
				factor = 0.85
				trait = midas_touched
			}
			modifier = {
				factor = 1.25
				trait = misguided_warrior
			}
			modifier = {
				factor = 1.5
				trait = tough_soldier
			}
			modifier = {
				factor = 1.95
				trait = skilled_tactician
			}
			modifier = {
				factor = 2
				trait = brilliant_strategist
			}
			modifier = {
				factor = 1.25
				trait = detached_priest
			}
			modifier = {
				factor = 0.85
				trait = martial_cleric
			}
			modifier = {
				factor = 0.75
				trait = scholarly_theologian
			}
			modifier = {
				factor = 0.65
				trait = mastermind_theologian
			}
			modifier = {
				factor = 0.75
				trait = stressed
			}
			modifier = {
				factor = 0.5
				trait = drunkard
			}
			modifier = {
				factor = 0.25
				trait = addict
			}
			modifier = {
				factor = 0.85
				trait = homosexual
			}
			modifier = {
				factor = 1.25
				trait = kinslayer
			}
			modifier = {
				factor = 0.75
				trait = clubfooted
			}
			modifier = {
				factor = 0.5
				trait = harelip
			}
			modifier = {
				factor = 0.5
				trait = hunchback
			}
			modifier = {
				factor = 0.85
				trait = lisp
			}
			modifier = {
				factor = 0.75
				trait = stutter
			}
			modifier = {
				factor = 0.5
				trait = dwarf
			}
			modifier = {
				factor = 0.5
				trait = inbred
			}
			modifier = {
				factor = 1.25
				trait = celibate
			}
			modifier = {
				factor = 0.5
				trait = hedonist
			}
			modifier = {
				factor = 0.75
				trait = scholar
			}
			modifier = {
				factor = 1.95
				trait = impaler
			}
			modifier = {
				factor = 0.85
				trait = poet
			}
			modifier = {
				factor = 0.85
				trait = lustful
			}
			modifier = {
				factor = 1.25
				trait = chaste
			}
			modifier = {
				factor = 0.85
				trait = gluttonous
			}
			modifier = {
				factor = 1.25
				trait = temperate
			}
			modifier = {
				factor = 0.85
				trait = greedy
			}
			modifier = {
				factor = 0.95
				trait = charitable
			}
			modifier = {
				factor = 0.85
				trait = slothful
			}
			modifier = {
				factor = 1.25
				trait = diligent
			}
			modifier = {
				factor = 0.85
				trait = envious
			}
			modifier = {
				factor = 0.85
				trait = kind
			}
			modifier = {
				factor = 0.95
				trait = wroth
			}
			modifier = {
				factor = 1.15
				trait = patient
			}
			modifier = {
				factor = 0.85
				trait = proud
			}
			modifier = {
				factor = 1.15
				trait = humble
			}
			modifier = {
				factor = 0.85
				trait = deceitful
			}
			modifier = {
				factor = 0.35
				trait = craven
			}
			modifier = {
				factor = 1.5
				trait = cruel
			}
		}
	}
	send_strigany_caravan = {
		filter = home_court
		ai_target_filter = home_court
		only_playable = yes
		from_potential = {
			NOT = {
				has_any_opinion_modifier = opinion_strigany_caravan_beacon
			}
			OR = {
				trait = vampire_strigoi_visible
				AND = {
					culture_group = strigany_group
					is_living_human_trigger = yes
				}
			}
		}
		potential = {
			age = 16
			is_ruler = no
			host = {
				character = FROM
			}
			OR = {
				is_married = no
				any_spouse = {
					is_ruler = no
				}
			}
			religion_group = necromantic_group
			culture_group = strigany_group
			nor = {
				has_any_opinion_modifier = opinion_strigany_caravan_beacon
				has_any_opinion_modifier = opinion_strigany_caravan_beacon2
				character = FROM
			}
			is_living_human_trigger = yes
			any_playable_ruler = {
				higher_tier_than = BARON
				is_within_diplo_range = FROM
				trait = creature_human
				is_landed = yes
				nor = {
					has_any_opinion_modifier = opinion_strigany_caravan_beacon2
					capital_scope = {
						has_province_modifier = strigany_caravan
					}
					trait = witch_hunter
					character = FROM
					culture_group = strigany_group
					has_character_modifier = expelled_strigany
					top_liege = {
						has_character_modifier = expelled_strigany
					}
				}
				OR = {
					religion_group = old_world_group
					religion_group = ormazd_gods_group
					religion_group = necromantic_group
				}
			}
		}
		allow = {
			from = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
				wealth = 25
				prestige = 50
			}
			custom_tooltip = {
				text = IS_NOT_INCAPACITATED
				is_incapacitated_trigger = no
			}
		}
		effect = {
			log = "work decision send_strigany_caravan for [Root.GetBestName]"
			FROM = {
				wealth = -25
				prestige = -50
			}
			hidden_tooltip = {
				FROM = {
					opinion = {
						who = ROOT
						modifier = opinion_strigany_caravan_beacon
						months = 1
					}
				}
				random_playable_ruler = {
					limit = {
						higher_tier_than = BARON
						is_within_diplo_range = FROM
						nor = {
							has_any_opinion_modifier = opinion_strigany_caravan_beacon2
							capital_scope = {
								has_province_modifier = strigany_caravan
							}
						}
						trait = creature_human
						NOT = {
							trait = witch_hunter
						}
						is_landed = yes
						nor = {
							character = FROM
							culture_group = strigany_group
							has_character_modifier = expelled_strigany
							top_liege = {
								has_character_modifier = expelled_strigany
							}
						}
						OR = {
							religion_group = old_world_group
							religion_group = ormazd_gods_group
							religion_group = necromantic_group
						}
					}
					character_event = {
						id = svampires.32 days = 14 random = 15
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 1.5
				FROM = {
					trait = greedy
				}
			}
			modifier = {
				factor = 1.5
				FROM = {
					dynasty = ROOT
				}
			}
			modifier = {
				factor = 0.1
				FROM = {
					current_heir = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					mother = {
						character = ROOT
					}
				}
			}
			modifier = {
				factor = 0
				FROM = {
					father = {
						character = ROOT
					}
				}
			}
		}
	}

	jade_hipnotize = {
		filter = court
		ai_target_filter = court
		from_potential = {
			trait = vampire_jade_visible
			nor = {
				has_character_modifier = magic_cooldown
				trait = blinded
				has_character_modifier = jade_degradation_3
				has_character_modifier = jade_degradation_4
			}
		}
		potential = {
			is_undead_trigger = no
			is_demon_trigger = no
			nor = {
				trait = creature_forestspirit
				trait = creature_treekin
			}
			is_within_diplo_range = FROM
			OR = {
				prisoner = yes
				liege = {
					character = FROM
				}
			}
		}
		allow = {
			nor = {
				character = FROM
				has_any_opinion_modifier = opinion_ensnared_me
			}
			is_within_diplo_range = FROM
			FROM = {
				custom_tooltip = {
					text = IS_NOT_INCAPACITATED
					is_incapacitated_trigger = no
				}
			}
			OR = {
				prisoner = yes
				liege = {
					character = FROM
				}
			}
		}
		effect = {
			log = "work decision jade_hipnotize for [Root.GetBestName]"
			character_event = {
				id = svampires.71
			}
			hidden_tooltip = {
				FROM = {
					add_character_modifier = {
						name = magic_cooldown
						duration = 300
						hidden = yes
					}
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 0.25
				FROM = {
					trait = kind
				}
			}
			modifier = {
				factor = 0
				reverse_opinion = {
					who = FROM value = 75
				}
			}
			modifier = {
				factor = 0.01
				reverse_opinion = {
					who = FROM value = 60
				}
			}
			modifier = {
				factor = 0.1
				reverse_opinion = {
					who = FROM value = 50
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 40
				}
			}
			modifier = {
				factor = 0.25
				reverse_opinion = {
					who = FROM value = 30
				}
			}
			modifier = {
				factor = 0.5
				reverse_opinion = {
					who = FROM value = 20
				}
			}
			modifier = {
				factor = 0.95
				reverse_opinion = {
					who = FROM value = 10
				}
			}
			modifier = {
				factor = 1.5
				NOT = {
					reverse_opinion = {
						who = FROM value = -10
					}
				}
			}
			modifier = {
				factor = 1.75
				NOT = {
					reverse_opinion = {
						who = FROM value = -20
					}
				}
			}
			modifier = {
				factor = 1.95
				NOT = {
					reverse_opinion = {
						who = FROM value = -30
					}
				}
			}
			modifier = {
				factor = 1.95
				NOT = {
					reverse_opinion = {
						who = FROM value = -40
					}
				}
			}
			modifier = {
				factor = 2
				NOT = {
					reverse_opinion = {
						who = FROM value = -50
					}
				}
			}
			modifier = {
				factor = 2.5
				NOT = {
					reverse_opinion = {
						who = FROM value = -60
					}
				}
			}
			modifier = {
				factor = 2.75
				NOT = {
					reverse_opinion = {
						who = FROM value = -75
					}
				}
			}
			modifier = {
				factor = 2
				FROM = {
					trait = paranoid
				}
			}
			modifier = {
				factor = 2
				ROOT = {
					is_ruler = yes
				}
			}
		}
	}
	jade_hipnotize_stop = {
		ai_target_filter = court
		from_potential = {
			trait = vampire_jade_visible
			is_incapacitated_trigger = no
		}
		potential = {
			any_friend = {
				character = FROM
			}
		}
		allow = {
			has_opinion_modifier = {
				who = FROM
				modifier = opinion_ensnared_me
			}
		}
		effect = {
			log = "work decision jade_hipnotize_stop for [Root.GetBestName]"
			remove_friend = FROM
		}
		ai_will_do = {
			factor = 0
		}
	}
}
#END